(window.webpackJsonpimage=window.webpackJsonpimage||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),c=a.n(r),l=a(10),o=a(2),s=a(3),u=a(6),h=a(4),m=a(1),g=a(5),d=(a(16),a(9)),f=(a(17),{display:"block",margin:"10px auto"}),v=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={fcr:255,fcg:255,fcb:255,fca:255,rcr:255,rcg:255,rcb:255,rca:255,tcr:10,tcg:10,tcb:10,tca:10},e.onChange=e.onChange.bind(Object(m.a)(e)),e}return Object(g.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){var t=Number(e.target.value);if(!isNaN(t)&&t>=0&&t<=255){var a=Object(d.a)({},e.target.name,t);this.setState(a)}}},{key:"render",value:function(){var e=this;return i.a.createElement("form",{onSubmit:function(t){return e.props.submit(e.state,t)}},i.a.createElement("div",{className:"replaceGrid"},i.a.createElement("label",null),i.a.createElement("label",null,"Find"),i.a.createElement("label",null,"Replace"),i.a.createElement("label",null,"Tolerance"),i.a.createElement("label",null,"Red:"),i.a.createElement("input",{type:"text",value:this.state.fcr,onChange:function(t){return e.onChange(t)},name:"fcr"}),i.a.createElement("input",{type:"text",value:this.state.rcr,onChange:function(t){return e.onChange(t)},name:"rcr"}),i.a.createElement("input",{type:"text",value:this.state.tcr,onChange:function(t){return e.onChange(t)},name:"tcr"}),i.a.createElement("label",null,"Green:"),i.a.createElement("input",{type:"text",value:this.state.fcg,onChange:function(t){return e.onChange(t)},name:"fcg"}),i.a.createElement("input",{type:"text",value:this.state.rcg,onChange:function(t){return e.onChange(t)},name:"rcg"}),i.a.createElement("input",{type:"text",value:this.state.tcg,onChange:function(t){return e.onChange(t)},name:"tcg"}),i.a.createElement("label",null,"Blue:"),i.a.createElement("input",{type:"text",value:this.state.fcb,onChange:function(t){return e.onChange(t)},name:"fcb"}),i.a.createElement("input",{type:"text",value:this.state.rcb,onChange:function(t){return e.onChange(t)},name:"rcb"}),i.a.createElement("input",{type:"text",value:this.state.tcb,onChange:function(t){return e.onChange(t)},name:"tcb"}),i.a.createElement("label",null,"Alpha:"),i.a.createElement("input",{type:"text",value:this.state.fca,onChange:function(t){return e.onChange(t)},name:"fca"}),i.a.createElement("input",{type:"text",value:this.state.rca,onChange:function(t){return e.onChange(t)},name:"rca"}),i.a.createElement("input",{type:"text",value:this.state.tca,onChange:function(t){return e.onChange(t)},name:"tca"})),i.a.createElement("button",{style:f,type:"submit"},"Replace Colour"))}}]),t}(n.Component);var p=function(e){return i.a.createElement("div",null,i.a.createElement(v,{submit:function(t,a){return function(e,t,a,n){n.preventDefault(),e(t,[a.fcr,a.fcg,a.fcb,a.fca],[a.rcr,a.rcg,a.rcb,a.rca],[a.tcr,a.tcg,a.tcb,a.tca])}(e.replace,e.file,t,a)}}))};var b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={imgData:null,newData:null,x1:0,x2:0,y1:0,y2:0},e.imageChange=e.imageChange.bind(Object(m.a)(e)),e.download=e.download.bind(Object(m.a)(e)),e.loadImage=e.loadImage.bind(Object(m.a)(e)),e.swapImage=e.swapImage.bind(Object(m.a)(e)),e.replace=e.replace.bind(Object(m.a)(e)),e.recentre=e.recentre.bind(Object(m.a)(e)),e}return Object(g.a)(t,e),Object(s.a)(t,[{key:"imageChange",value:function(e){var t=this,a=e.target.files[0];if(a){var n=new Image,i=new FileReader;i.onload=function(e){n.onload=function(e){var a=document.createElement("canvas"),n=e.target,i=n.width,r=n.height;a.width=i,a.height=r,a.getContext("2d").drawImage(n,0,0,i,r);var c=a.getContext("2d").getImageData(0,0,i,r);t.setState({imgData:c},t.loadImage)};var a=e.target.result;a.startsWith("data:image")?n.src=a:alert("That file type is not supported")},i.readAsDataURL(a)}e.target.value=""}},{key:"loadImage",value:function(){var e=document.getElementById("canvas");e.width=e.scrollWidth,e.height=e.scrollHeight;var t=e.getContext("2d");(e=document.getElementById("newCanvas")).width=e.scrollWidth,e.height=e.scrollHeight,t.putImageData(this.state.imgData,0,0),this.swapImage(!1)}},{key:"swapImage",value:function(e){if(this.state.imgData){var t=e?["canvas",this.state.newData]:["newCanvas",this.state.imgData],a=Object(l.a)(t,2),n=a[0],i=a[1];document.getElementById(n).getContext("2d").putImageData(i,0,0);var r=new Uint8ClampedArray(i.data),c=new ImageData(r,i.width,i.height);e?this.setState({imgData:c,x1:0,y1:0}):this.setState({newData:c,x2:0,y2:0})}}},{key:"replace",value:function(e,t,a,n){e&&(!function(e,t,a,n,i){for(var r=!1,c=e.data,l=t.data,o=0;o<c.length;o+=4){r=!0;for(var s=0;s<4;s++)r=r&&Math.abs(c[o+s]-a[s])<=i[s];if(r)for(var u=0;u<4;u++)l[o+u]=n[u];else for(var h=0;h<4;h++)l[o+h]=c[o+h]}}(this.state.imgData,e,t,a,n),document.getElementById("newCanvas").getContext("2d").putImageData(e,0,0))}},{key:"download",value:function(){var e=document.getElementById("download");if(this.state.imgData){var t=document.createElement("canvas");t.width=this.state.imgData.width,t.height=this.state.imgData.height,t.getContext("2d").putImageData(this.state.newData,0,0),e.setAttribute("href",t.toDataURL()),e.click()}}},{key:"recentre",value:function(e){var t=e.target;if(this.state.imgData&&(this.state.imgData.width>t.width||this.state.imgData.height>t.height)){var a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);var n="canvas"===t.id?this.state.x1:this.state.x2,i="canvas"===t.id?this.state.y1:this.state.y2,r="canvas"===t.id?this.state.imgData:this.state.newData,c=t.width/2,l=[n+e.clientX-t.offsetLeft-c,i+e.clientY-t.offsetTop-c];l[0]=l[0]<0?0:l[0],l[0]=l[0]>r.width-t.width?r.width-t.width:l[0],l[0]=r.width<t.width?0:l[0],l[1]=l[1]<0?0:l[1],l[1]=l[1]>r.height-t.height?r.height-t.height:l[1],l[1]=r.width<t.width?0:l[1],"canvas"===t.id?this.setState({x1:l[0],y1:l[1]}):this.setState({x2:l[0],y2:l[1]});for(var o=[r.width,r.height],s=o[0],u=o[1],h=s-l[0],m=u-l[1],g=new Uint8ClampedArray(h*m*4),d=0;d<m;d++)for(var f=0;f<h;f++)for(var v=0;v<4;v++)g[d*h*4+4*f+v]=r.data[(l[1]+d)*s*4+4*(l[0]+f)+v];r=new ImageData(g,h,m),a.putImageData(r,0,0)}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"grid"},i.a.createElement("label",null,"Old Preview"),i.a.createElement("label",null,"New Preview"),i.a.createElement("div",{className:"transparent"},i.a.createElement("canvas",{id:"canvas",onClick:this.recentre})),i.a.createElement("div",{className:"transparent"},i.a.createElement("canvas",{id:"newCanvas",onClick:this.recentre})),i.a.createElement("input",{id:"upload",type:"file",onChange:this.imageChange,hidden:!0}),i.a.createElement("button",{onClick:function(){return document.getElementById("upload").click()}},"Upload Image"),i.a.createElement("button",{onClick:this.download},"Download"),i.a.createElement("button",{onClick:function(){return e.swapImage(!0)}},"Copy new into old"),i.a.createElement("button",{onClick:function(){return e.swapImage(!1)}},"Copy old into new")),i.a.createElement("a",{id:"download",href:"/",style:{display:"none"},download:"converted"},"Download"),i.a.createElement(p,{replace:this.replace,file:this.state.newData}))}}]),t}(n.Component);c.a.render(i.a.createElement(b,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.db4bd61c.chunk.js.map