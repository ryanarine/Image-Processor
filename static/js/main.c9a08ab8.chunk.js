(window.webpackJsonpimage=window.webpackJsonpimage||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),l=a.n(r),i=a(10),o=a(2),u=a(3),s=a(6),m=a(4),g=a(1),h=a(5),d=(a(16),a(9)),p=(a(17),{display:"block",margin:"10px auto"}),f=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={fcr:255,fcg:255,fcb:255,fca:255,rcr:255,rcg:255,rcb:255,rca:255,tcr:10,tcg:10,tcb:10,tca:10},e.onChange=e.onChange.bind(Object(g.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){var t=Number(e.target.value);if(!isNaN(t)&&t>=0&&t<=255){var a=Object(d.a)({},e.target.name,t);this.setState(a)}}},{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:function(t){return e.props.submit(e.state,t)}},c.a.createElement("div",{className:"replaceGrid"},c.a.createElement("label",null),c.a.createElement("label",null,"Find"),c.a.createElement("label",null,"Replace"),c.a.createElement("label",null,"Tolerance"),c.a.createElement("label",null,"Red:"),c.a.createElement("input",{type:"text",value:this.state.fcr,onChange:function(t){return e.onChange(t)},name:"fcr"}),c.a.createElement("input",{type:"text",value:this.state.rcr,onChange:function(t){return e.onChange(t)},name:"rcr"}),c.a.createElement("input",{type:"text",value:this.state.tcr,onChange:function(t){return e.onChange(t)},name:"tcr"}),c.a.createElement("label",null,"Green:"),c.a.createElement("input",{type:"text",value:this.state.fcg,onChange:function(t){return e.onChange(t)},name:"fcg"}),c.a.createElement("input",{type:"text",value:this.state.rcg,onChange:function(t){return e.onChange(t)},name:"rcg"}),c.a.createElement("input",{type:"text",value:this.state.tcg,onChange:function(t){return e.onChange(t)},name:"tcg"}),c.a.createElement("label",null,"Blue:"),c.a.createElement("input",{type:"text",value:this.state.fcb,onChange:function(t){return e.onChange(t)},name:"fcb"}),c.a.createElement("input",{type:"text",value:this.state.rcb,onChange:function(t){return e.onChange(t)},name:"rcb"}),c.a.createElement("input",{type:"text",value:this.state.tcb,onChange:function(t){return e.onChange(t)},name:"tcb"}),c.a.createElement("label",null,"Alpha:"),c.a.createElement("input",{type:"text",value:this.state.fca,onChange:function(t){return e.onChange(t)},name:"fca"}),c.a.createElement("input",{type:"text",value:this.state.rca,onChange:function(t){return e.onChange(t)},name:"rca"}),c.a.createElement("input",{type:"text",value:this.state.tca,onChange:function(t){return e.onChange(t)},name:"tca"})),c.a.createElement("button",{style:p,type:"submit"},"Replace Colour"))}}]),t}(n.Component);var v=function(e){return c.a.createElement("div",null,c.a.createElement(f,{submit:function(t,a){return function(e,t,a,n){n.preventDefault(),e(t,[a.fcr,a.fcg,a.fcb,a.fca],[a.rcr,a.rcg,a.rcb,a.rca],[a.tcr,a.tcg,a.tcb,a.tca])}(e.replace,e.file,t,a)}}))},b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={imgData:null,newData:null},e.imageChange=e.imageChange.bind(Object(g.a)(e)),e.download=e.download.bind(Object(g.a)(e)),e.loadImage=e.loadImage.bind(Object(g.a)(e)),e.swapImage=e.swapImage.bind(Object(g.a)(e)),e.changeImgData=e.changeImgData.bind(Object(g.a)(e)),e.replace=e.replace.bind(Object(g.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"imageChange",value:function(e){var t=this,a=e.target.files[0];if(a){var n=new Image,c=new FileReader;c.onload=function(e){n.onload=function(e){var a=document.createElement("canvas"),n=e.target,c=n.width,r=n.height;a.width=c,a.height=r,a.getContext("2d").drawImage(n,0,0,c,r);var l=a.getContext("2d").getImageData(0,0,c,r);t.setState({imgData:l},t.loadImage)};var a=e.target.result;a.startsWith("data:image")?n.src=a:alert("That file type is not supported")},c.readAsDataURL(a)}e.target.value=""}},{key:"loadImage",value:function(){var e=document.getElementById("canvas");e.width=e.scrollWidth,e.height=e.scrollHeight;var t=e.getContext("2d");(e=document.getElementById("newCanvas")).width=e.scrollWidth,e.height=e.scrollHeight,t.putImageData(this.state.imgData,0,0),this.swapImage(!1)}},{key:"swapImage",value:function(e){if(this.state.imgData){var t=e?["canvas",this.state.newData]:["newCanvas",this.state.imgData],a=Object(i.a)(t,2),n=a[0],c=a[1];document.getElementById(n).getContext("2d").putImageData(c,0,0);var r=new Uint8ClampedArray(c.data),l=new ImageData(r,c.width,c.height);e?this.setState({imgData:l}):this.setState({newData:l})}}},{key:"changeImgData",value:function(e,t,a,n,c){for(var r=!1,l=e.data,i=t.data,o=0;o<l.length;o+=4){r=!0;for(var u=0;u<4;u++)r=r&&Math.abs(l[o+u]-a[u])<=c[u];if(r)for(var s=0;s<4;s++)i[o+s]=n[s];else for(var m=0;m<4;m++)i[o+m]=l[o+m]}}},{key:"replace",value:function(e,t,a,n){e&&(this.changeImgData(this.state.imgData,e,t,a,n),document.getElementById("newCanvas").getContext("2d").putImageData(e,0,0))}},{key:"download",value:function(){var e=document.getElementById("download");if(this.state.imgData){var t=document.createElement("canvas");t.width=this.state.imgData.width,t.height=this.state.imgData.height,t.getContext("2d").putImageData(this.state.newData,0,0),e.setAttribute("href",t.toDataURL()),e.click()}}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"grid"},c.a.createElement("label",null,"Old Preview"),c.a.createElement("label",null,"New Preview"),c.a.createElement("div",{className:"transparent",style:{width:"400px",height:"400px"}},c.a.createElement("canvas",{id:"canvas",style:{width:"400px",height:"400px"}})),c.a.createElement("div",{className:"transparent",style:{width:"400px",height:"400px"}},c.a.createElement("canvas",{id:"newCanvas",style:{width:"400px",height:"400px"}})),c.a.createElement("input",{id:"upload",type:"file",onChange:this.imageChange,hidden:!0}),c.a.createElement("button",{onClick:function(){return document.getElementById("upload").click()}},"Upload Image"),c.a.createElement("button",{onClick:this.download},"Download"),c.a.createElement("button",{onClick:function(){return e.swapImage(!0)}},"Copy new into old"),c.a.createElement("button",{onClick:function(){return e.swapImage(!1)}},"Copy old into new")),c.a.createElement("a",{id:"download",href:"/",style:{display:"none"},download:"converted"},"Download"),c.a.createElement(v,{replace:this.replace,file:this.state.newData}))}}]),t}(n.Component);l.a.render(c.a.createElement(b,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.c9a08ab8.chunk.js.map