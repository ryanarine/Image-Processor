(window.webpackJsonpimage=window.webpackJsonpimage||[]).push([[0],{40:function(e,t,a){e.exports=a(52)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),i=a.n(o),c=a(3),l=a(21),u=a(36),s=a(18),p=a(12),d=a(13);function h(e,t,a,n,r){for(var o=!0,i=t.slice(0,3).reduce((function(e,t){return e+t})),c=t.map((function(e,t){return n[t]?e/i*100:e})),l=0;l<4;l++)switch(e[l]){case"=":o=o&&Math.abs(c[l]-a[l])<=r[l];break;case">":o=o&&c[l]>a[l];break;case">=":o=o&&c[l]>=a[l];break;case"<":o=o&&c[l]<a[l];break;case"<=":o=o&&c[l]<=a[l];break;default:return void alert("Something went terribly wrong. Please refresh the page and try again")}return o}function m(e,t,a,n){for(var r=0;r<4;r++)switch(e[r]){case"=":t[n+r]=a[r];break;case"+":t[n+r]+=a[r];break;case"-":t[n+r]-=a[r];break;case"*":t[n+r]*=a[r];break;case"/":t[n+r]/=a[r];break;default:return void alert("Something went terribly wrong. Please refresh the page and try again")}}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={imgData:null,newData:null,x1:0,x2:0,y1:0,y2:0,pixelSample:!1,colourSample:!1,pixel:null,zoom1:0,zoom2:0},v={GRAYSCALE:function(e){for(var t=0,a=0;a<e.length;a+=4)t=Math.round((e[a]+e[a+1]+e[a+2])/3),e[a]=t,e[a+1]=t,e[a+2]=t},NEGATIVE:function(e){for(var t=0;t<e.length;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2]},BRIGHT:function(e,t){for(var a=0;a<e.length;a+=4)e[a]=e[a]*t,e[a+2]=e[a+2]*t,e[a+1]=e[a+1]*t},REPLACE:function(e,t,a,n,r,o,i){for(var c=0;c<e.length;c+=4)h(t,e.slice(c,c+4),a,n,i)&&m(r,e,o,c)}},E=50,y=1.5;function w(e,t,a,n){return a<t.width||e[0]<0?e[0]=0:e[0]=e[0]>a-t.width?a-t.width:e[0],n<t.height||e[1]<0?e[1]=0:e[1]=e[1]>n-t.height?n-t.height:e[1],e}function O(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"newCanvas",r=document.getElementById(n);r.getContext("2d").putImageData(a,-e,-t,e,t,r.width,r.height)}function C(e,t){e.forEach((function(e,a){return t[a]=e}))}function x(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"container cross":"container dropper";document.getElementById("container").className=e?"container":t}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return t.isNewCanvas?g({},e,{newData:t.data}):g({},e,{imgData:t.data});case"NAME":return g({},e,{fileName:t.name});case"REFRESH":return g({},e,{x1:0,x2:0,y1:0,y2:0,sample:!1,pixel:null,zoom1:0,zoom2:0});case"CENTER":var a=t.canvas,n="canvas"===a.id?[e.x1,e.y1,e.imgData]:[e.x2,e.y2,e.newData],r=Object(p.a)(n,3),o=r[0],i=r[1],c=r[2],l=function(e,t,a,n,r,o,i){var c=e.width/2,l=e.height/2,u=e.width/e.scrollWidth,s=e.height/e.scrollHeight;return w([Math.round(t+(o-e.offsetLeft)*u-c),Math.round(a+(i-e.offsetTop)*s-l)],e,n,r)}(t.canvas,o,i,c.width,c.height,t.pageX,t.pageY);if(l[0]!==o||l[1]!==i){var u,d,f,k,j=a.getContext("2d");"newCanvas"===a.id?(u=l,d=Object(p.a)(u,2),e.x2=d[0],e.y2=d[1]):(f=l,k=Object(p.a)(f,2),e.x1=k[0],e.y1=k[1]);var D=[c.width,c.height],I=D[0],P=D[1],S=I-l[0],N=P-l[1];S=Math.min(a.width,S),N=Math.min(a.height,N);for(var T=new Uint8ClampedArray(S*N*4),A=0;A<N;A++)for(var M=0;M<S;M++)for(var L=0;L<4;L++)T[A*S*4+4*M+L]=c.data[(l[1]+A)*I*4+4*(l[0]+M)+L];c=new ImageData(T,S,N),j.putImageData(c,0,0)}return e;case"PIXEL":return x(e.pixelSample),g({},e,{pixelSample:!1,pixel:t.pixel});case"SAMPLE":return"PIXEL"===t.sample?(x(e.pixelSample),g({},e,{pixelSample:!e.pixelSample,colourSample:!1})):"COLOUR"===t.sample?(x(e.colourSample,!1),g({},e,{pixelSample:!1,colourSample:!e.colourSample})):e;case"BASIC":if(e.newData){var R=v[t.effect];C(e.imgData.data,e.newData.data),t.payload?R.apply(void 0,[e.newData.data].concat(Object(s.a)(t.payload))):R(e.newData.data),O(e.x2,e.y2,e.newData)}return e;case"SECTION":if(e.pixel&&e.newData){document.body.style.cursor="progress";var B=t.comparisons,U=t.oldVal,G=t.percentages,V=t.tolerance,Z=t.newVal,W=t.operators,F=function(e,t,a,n,r,o){var i=[e.width,e.height,e.data],c=i[0],l=i[1],u=i[2],s=[[0,-1],[1,0],[0,1],[-1,0]],d=new Array(c*l),m=[],f=[t[4],t[5]],g=f[0],b=f[1],v=[[g,b]];for(d[b*c+g]=!0;0!==v.length;){var E=v.pop(),y=Object(p.a)(E,2);if(g=y[0],b=y[1],!(g<0||g>c||b<0||b>l)){for(var w=[],O=0;O<4;O++)w.push(u[b*c*4+4*g+O]);h(a,w,n,r,o)&&(m.push(b*c*4+4*g),s.forEach((function(e){d[(b+e[1])*c+g+e[0]]||(d[(b+e[1])*c+g+e[0]]=!0,v.push([g+e[0],b+e[1]]))})))}}return m}(e.imgData,e.pixel,B,U,G,V),H=e.newData.data;C(e.imgData.data,e.newData.data),F.forEach((function(e){m(W,H,Z,e)})),O(e.x2,e.y2,e.newData),document.body.style.cursor="default"}else e.pixel||alert("You must first specify a section to paint. Click the cursor icon and then click on an area in the left canvas.");return e;case"SWAP":if(e.imgData){var X=t.copyToNew?["newCanvas",e.imgData,e.x2,e.y2]:["canvas",e.newData,e.x1,e.y1],Y=Object(p.a)(X,4),z=Y[0],J=Y[1],q=Y[2],K=Y[3],Q=document.getElementById(z);Q.getContext("2d").putImageData(J,-q,-K,q,K,Q.width,Q.height);var $=new Uint8ClampedArray(J.data),_=new ImageData($,J.width,J.height);return t.copyToNew?g({},e,{newData:_}):g({},e,{imgData:_})}return e;case"ZOOM":if(e.imgData){var ee=t.isNewCanvas?["newCanvas",e.newData,e.zoom2,e.x2,e.y2]:["canvas",e.imgData,e.zoom1,e.x1,e.y1],te=Object(p.a)(ee,5),ae=te[0],ne=te[1],re=te[2],oe=te[3],ie=te[4],ce=document.getElementById(ae);if(!t.isZoomOut||re<0||ne.width>ce.scrollWidth||ne.height>ce.scrollHeight){var le=t.isZoomOut?re+1:re-1,ue=Math.pow(y,le),se=Math.round(ce.scrollWidth*ue);if((t.isZoomOut&&re>=0||!t.isZoomOut&&re<=0)&&(!t.isZoomOut&&se<E?se=E:t.isZoomOut&&se>=ne.width&&se>=ne.height&&(se=Math.max(ne.width,ne.height))),se!==ce.width){ce.width=ce.height=se;var pe=w([oe,ie],ce,ne.width,ne.height),de=Object(p.a)(pe,2);oe=de[0],ie=de[1],e=t.isNewCanvas?g({},e,{x2:oe,y2:ie,zoom2:le}):g({},e,{x1:oe,y1:ie,zoom1:le}),O(oe,ie,ne,ae)}}}return e;default:return e}},j=function(e,t){return 0===e&&0===t?33:Math.round(100*e/t)},D={cc:["=","=","=","="],fc:[255,255,255,255],fp:[!1,!1,!1,!1],oc:["=","=","=","="],rc:[255,255,255,255],tc:[10,10,10,10],rModal:[!1,!1,!1,!1],fModal:[!1,!1,!1,!1]};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATEINPUT":var a=[t.name,t.value,t.index],n=a[0],r=a[1],o=a[2],i=255;if(n.startsWith("r")){var c=e.oc[o];"*"!==c&&"/"!==c||(i=500)}return!isNaN(r)&&r>=0&&r<=i?(r=Number(Number(r).toFixed()),e[n.substring(0,2)][o]=r,e):e;case"UPDATEOPTION":var l=[t.index,t.value,t.isOperator],u=l[0],s=l[1],p=l[2];return p&&e.rc[u]>255&&"*"!==s&&"/"!==s&&(e.rc[u]=255),p?e.oc[u]=s:e.cc[u]=s,e;case"UPDATEPERCENTAGE":var d=t.index;return e.fp[d]=!e.fp[d],e.fp[d]&&e.fc[d]>100&&(e.fc[d]=100),e;case"MODAL":for(var h=0;h<e.rModal.length;h++)e.rModal[h]=!1,e.fModal[h]=!1;return t.index>=0&&(t.replace?e.rModal[t.index]=!0:e.fModal[t.index]=!0),e;case"SAMPLECOLOUR":var m=t.r,f=t.g,g=t.b,b=t.a,v=m+f+g;return e.fc=[m,f,g,b].map((function(t,a){return e.fp[a]?j(t,v):t})),e;default:return e}},P=Object(l.c)({image:k,replace:I}),S=a(17),N=a(14),T=a(24),A=a(25),M=a(7),L=a(26),R=function(e){return{type:"SAMPLE",sample:e}},B=function(e,t){return{type:"BASIC",effect:e,payload:t}},U=function(e){return{type:"SWAP",copyToNew:e}},G=function(e,t){return{type:"ZOOM",isZoomOut:e,isNewCanvas:t}},V=function(e,t){return{type:"UPDATEINPUT",name:e.target.name,value:e.target.value,index:t}},Z=function(e,t,a){return{type:"UPDATEOPTION",index:e,value:t,isOperator:a}},W=function(e){return{type:"UPDATEPERCENTAGE",index:e}},F=function(e){return{type:"MODAL",index:e,replace:!0}},H=function(e){return{type:"MODAL",index:e,replace:!1}},X=function(e,t,a,n){return{type:"SAMPLECOLOUR",r:e,g:t,b:a,a:n}},Y={position:"absolute",width:"0",height:"0",borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"10px solid rgba(255,255,255,0.8)",top:"calc(-100% + 13px)",left:"calc(50% - 5px)",animation:"appear 0.3s linear"},z={position:"absolute",width:"max-content",height:"25px",padding:"5px",backgroundColor:"rgba(255,255,255,0.8)",top:"calc(-100% - 22.5px)",left:"100%",borderRadius:"5px",transform:"translateX(calc(-50% - 14px))",animation:"appear 0.3s linear"};var J=function(e){var t=Object(c.c)(),a=e.index,n=e.replace?F:H,o=e.options.map((function(n){return r.a.createElement("button",{key:n,type:"button",className:"findBtn",onClick:function(){return t(Z(a,n,e.replace))}},n)}));return window.addEventListener("click",(function e(){window.removeEventListener("click",e,!1),t(n(-1))}),!1),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Y}),r.a.createElement("div",{style:z},o))},q=["r","g","b","a"],K=["red","green","blue","alpha"],Q=["f","r","t"],$=["=",">",">=","<","<="],_=["=","+","-","*","/"],ee=function(e,t,a,n){var r,o="Select only pixels that have a ".concat(K[n]," value"),i=a?"% of the pixel's total value":"";switch(e){case"=":r="that is within the tolerance range of";break;case">":r="greater than";break;case">=":r="greater than or equal to";break;case"<":r="less than";break;case"<=":r="less than or equal to";break;default:return""}return"".concat(o," ").concat(r," ").concat(t).concat(i)};function te(e){var t=e.index,a=e.isAlpha,n=Object(c.d)((function(e){return e.replace.cc[t]})),o=Object(c.d)((function(e){return e.replace.fc[t]})),i=Object(c.d)((function(e){return e.replace.fp[t]})),l=Object(c.d)((function(e){return e.replace.fModal[t]})),u=Object(c.c)(),s=l?r.a.createElement(J,{options:$,index:t,replace:!1}):"";return r.a.createElement("span",null,r.a.createElement("span",{style:{position:"relative"}},r.a.createElement("button",{type:"button",title:ee(n,o,i,t),onClick:function(e){e.stopPropagation(),u(H(t))},className:"findBtn"},n),s),r.a.createElement("input",{type:"text",value:o,onChange:function(e){return u(V(e,t))},name:"fc"+q[t]}),!a&&r.a.createElement("button",{type:"button",title:"Indicate whether the search looks at the absolute or relative value",className:"findBtn",onClick:function(){return u(W(t))}},i?"%":"#"))}var ae=function(e,t,a){var n=K[a],r="";switch(e){case"=":r="Change the ".concat(n," value of the selected pixels to ").concat(t);break;case"+":r="Increase the ".concat(n," value of the selected pixels by ").concat(t);break;case"-":r="Decrease the ".concat(n," value of the selected pixels by ").concat(t);break;case"*":r="Multiply the ".concat(n," value of the selected pixels by ").concat(t/100+1);break;case"/":r="Divide the ".concat(n," value of the selected pixels by ").concat(t/100+1);break;default:return""}return r};var ne=function(e){var t=e.index,a=Object(c.d)((function(e){return e.replace.oc[t]})),n=Object(c.d)((function(e){return e.replace.rc[t]})),o=Object(c.d)((function(e){return e.replace.rModal[t]})),i=Object(c.c)(),l="*"===a||"/"===a?"%":"",u=o?r.a.createElement(J,{options:_,index:t,replace:!0}):"",s=r.a.createElement("span",{style:{position:"relative"}},r.a.createElement("button",{type:"button",title:ae(a,n,t),onClick:function(e){e.stopPropagation(),i(F(t))},className:"findBtn"},a),u);return r.a.createElement("span",null,s,r.a.createElement("input",{type:"text",value:n,onChange:function(e){return i(V(e,t))},name:"rc"+q[t]}),l)};var re=function(e){var t=e.index,a=Object(c.c)(),n=Object(c.d)((function(e){return e.replace.tc[t]}));return r.a.createElement("input",{type:"text",value:n,onChange:function(e){return a(V(e,t))},name:"tc"+q[t]})};function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ie=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(T.a)(this,Object(A.a)(t).call(this))).getStateValues=function(){var t=e.props,a=t.cc,n=t.fc,r=t.fp,o=t.oc,i=t.rc,c=t.tc,l=i.map((function(e,t){return"*"===o[t]||"/"===o[t]?e/100+1:e}));return{comparisons:a,oldVal:n,percentages:r,operators:o,newVal:l,tolerance:c}},e.replace=e.replace.bind(Object(M.a)(e)),e.section=e.section.bind(Object(M.a)(e)),e.navigate=e.navigate.bind(Object(M.a)(e)),e.copy=e.copy.bind(Object(M.a)(e)),e}return Object(L.a)(t,e),Object(N.a)(t,[{key:"replace",value:function(){var e=this.getStateValues(),t=e.comparisons,a=e.oldVal,n=e.percentages,r=e.operators,o=e.newVal,i=e.tolerance;this.props.basicImgEffect("REPLACE",[t,a,n,r,o,i])}},{key:"section",value:function(){var e=this.getStateValues(),t=e.comparisons,a=e.oldVal,n=e.percentages,r=e.operators,o=e.newVal,i=e.tolerance;this.props.section(t,a,n,r,o,i)}},{key:"navigate",value:function(e){var t=e.which;if(t>=37&&t<=40){var a=document.getElementById("replaceGrid"),n=e.target.name;if(!n)return;var r=q.findIndex((function(e){return e===n[2]})),o=Q.findIndex((function(e){return e===n[0]}));if(37===t){if(0!==e.target.selectionStart)return;o=(o+Q.length-1)%Q.length}else if(38===t)r=(r+q.length-1)%q.length;else if(39===t){if(e.target.selectionStart!==e.target.value.length)return;o=(o+1)%Q.length}else r=(r+1)%q.length;var i=Q[o]+"c"+q[r];a[i].focus();var c=0;c=37===t||39===t?37===t?a[i].value.length:0:e.target.selectionStart,setTimeout((function(){return a[i].setSelectionRange(c,c)}),0)}}},{key:"copy",value:function(){var e=Ee.getState().image.pixel;e?this.props.sampleColour(e[0],e[1],e[2],e[3]):alert("You must specify a pixel first. Click on the cursor icon and then click on a pixel on the canvas to do so")}},{key:"render",value:function(){var e=this,t=q.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{key:"fc"+e,index:t,isAlpha:t===q.length-1}),r.a.createElement(ne,{key:"rc"+e,index:t}),r.a.createElement(re,{key:"tc"+e,index:t}))}));return r.a.createElement("form",{id:"replaceGrid",className:"replaceGrid",onKeyDown:this.navigate,autoComplete:"off"},r.a.createElement("label",null),r.a.createElement("span",null,r.a.createElement("label",null,"Find"),r.a.createElement("button",{onClick:function(){return e.props.switchSample("PIXEL")},type:"button",title:"Specify a section on the canvas by clicking on a pixel within that section",className:"infoTool"},r.a.createElement("i",{id:"clickIcon"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{onClick:function(){return e.props.switchSample("COLOUR")},type:"button",title:"Sample a pixel's colour off one of the canvases",className:"infoTool"},r.a.createElement("i",{id:"dropperIcon"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{type:"button",onClick:this.copy,title:"Copy the selected pixel's colour to the inputs",className:"infoTool"},r.a.createElement("i",{id:"mouseDropperIcon"},"\xa0\xa0\xa0\xa0"))),r.a.createElement("label",null,"Replace"),r.a.createElement("label",null,"Tolerance"),r.a.createElement("label",null,"Red:"),t[0],r.a.createElement("label",null,"Green:"),t[1],r.a.createElement("label",null,"Blue:"),t[2],r.a.createElement("label",null,"Alpha:"),t[3],r.a.createElement("div",{id:"replaceBtns"},r.a.createElement("button",{type:"button",onClick:this.replace},"Replace Colour"),r.a.createElement("button",{type:"button",onClick:this.section},"Replace Section Colour")))}}]),t}(n.Component),ce=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.replace)}),{switchSample:R,basicImgEffect:B,section:function(e,t,a,n,r,o){return{type:"SECTION",comparisons:e,oldVal:t,percentages:a,operators:n,newVal:r,tolerance:o}},updateOption:Z,updateInput:V,sampleColour:X})(ie);a(50);var le=function(){return r.a.createElement("div",null,r.a.createElement(ce,null))},ue=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(T.a)(this,Object(A.a)(t).call(this))).state={val:0},e.handleChange=e.handleChange.bind(Object(M.a)(e)),e.handleClick=e.handleClick.bind(Object(M.a)(e)),e}return Object(L.a)(t,e),Object(N.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;!isNaN(t)&&t>=0&&t<=500&&(t=Number(Number(t).toFixed()),this.setState({val:t}))}},{key:"handleClick",value:function(){this.props.basicImgEffect("BRIGHT",[this.props.multiplier(this.state.val)])}},{key:"render",value:function(){var e=this.props.text||"Lighten";return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleClick}," ",e),r.a.createElement("input",{type:"text",value:this.state.val,onChange:this.handleChange,style:{width:"25px"}}),r.a.createElement("label",null,"%"))}}]),t}(n.PureComponent),se=Object(c.b)((function(){return{}}),{basicImgEffect:B})(ue);var pe=function(){var e=Object(c.c)();return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",justifyItems:"center"}},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e(B("GRAYSCALE"))}}," Grayscale "),r.a.createElement("button",{onClick:function(){return e(B("NEGATIVE"))}}," Negative "),r.a.createElement(se,{multiplier:function(e){return e/100+1}}),r.a.createElement(se,{multiplier:function(e){return 100/(e+100)},text:"Darken"})))};a(51);var de=function(e){var t=Object(c.c)();return r.a.createElement("div",null,r.a.createElement("input",{id:"upload",type:"file",onChange:e.change,hidden:!0}),r.a.createElement("button",{className:"fileBtn",onClick:function(){return document.getElementById("upload").click()}},r.a.createElement("i",{id:"uploadIcon",title:"Upload Image"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{onClick:function(){return t(U(!1))}},r.a.createElement("i",{id:"leftIcon",title:"Copy new preview to old"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(G(!1,!1))}},r.a.createElement("i",{id:"plusIcon",title:"Zoom in"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(G(!0,!1))}},r.a.createElement("i",{id:"minusIcon",title:"Zoom out"},"\xa0\xa0\xa0\xa0")))},he=a(77),me=a(78);var fe=function(e){var t=Object(c.c)(),a=Object(n.useState)(null),o=Object(p.a)(a,2),i=o[0],l=o[1],u=function(){return l(null)},s=function(t){return function(){u(),e.download(t)}};return r.a.createElement("div",null,r.a.createElement("button",{className:"fileBtn",onClick:function(e){return l(e.currentTarget)}},r.a.createElement("i",{id:"downloadIcon",title:"Download Image"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{onClick:function(){return t(U(!0))}},r.a.createElement("i",{id:"rightIcon",title:"Copy old preview to new"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(G(!1,!0))}},r.a.createElement("i",{id:"plusIcon",title:"Zoom in"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(G(!0,!0))}},r.a.createElement("i",{id:"minusIcon",title:"Zoom out"},"\xa0\xa0\xa0\xa0")),r.a.createElement(he.a,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:u},r.a.createElement(me.a,{onClick:s("png")},"PNG"),r.a.createElement(me.a,{onClick:s("jpeg")},"JPG"),r.a.createElement(me.a,{onClick:s("webp")},"WebP")))};function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var be=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(T.a)(this,Object(A.a)(t).call(this))).imageChange=e.imageChange.bind(Object(M.a)(e)),e.download=e.download.bind(Object(M.a)(e)),e.recenter=e.recenter.bind(Object(M.a)(e)),e.handleClick=e.handleClick.bind(Object(M.a)(e)),e}return Object(L.a)(t,e),Object(N.a)(t,[{key:"imageChange",value:function(e){var t=this,a=e.target.files[0];if(a){var n=new Image,r=new FileReader;r.onload=function(e){n.onload=function(e){var a=document.createElement("canvas"),n=e.target,r=n.width,o=n.height;a.width=r,a.height=o,a.getContext("2d").drawImage(n,0,0,r,o);var i=a.getContext("2d").getImageData(0,0,r,o);(a=document.getElementById("canvas")).width=a.scrollWidth,a.height=a.scrollHeight;var c=a.getContext("2d");(a=document.getElementById("newCanvas")).width=a.scrollWidth,a.height=a.scrollHeight,t.props.setImgData(!1,i).then((function(){c.putImageData(t.props.imgData,0,0,0,0,a.scrollWidth,a.scrollHeight),t.props.swap(!0)})),t.props.refresh()};var r=e.target.result;r.startsWith("data:image")?(n.src=r,t.props.setFileName(a.name.substring(0,a.name.lastIndexOf(".")))):alert("That file type is not supported")},r.readAsDataURL(a)}e.target.value=""}},{key:"download",value:function(e){if(this.props.imgData){var t=document.createElement("a"),a=document.createElement("canvas");a.width=this.props.imgData.width,a.height=this.props.imgData.height,a.getContext("2d").putImageData(this.props.newData,0,0),t.setAttribute("href",a.toDataURL("image/".concat(e))),t.setAttribute("download","".concat(this.props.fileName,"-converted")),t.click(),t.remove(),a.remove()}}},{key:"recenter",value:function(e){var t=e.target;this.props.imgData&&(this.props.imgData.width>t.width||this.props.imgData.height>t.height)&&this.props.center(t,e.pageX,e.pageY)}},{key:"handleClick",value:function(e){if(this.props.imgData&&(this.props.pixelSample||this.props.colourSample)){var t=e.target,a=t.width/t.scrollWidth,n=t.height/t.scrollHeight,r=[Math.round((e.pageX-t.offsetLeft)*a+this.props.x1),Math.round((e.pageY-t.offsetTop)*n+this.props.y1)];if(r[0]>=0&&r[0]<=this.props.imgData.width&&r[1]>=0&&r[1]<=this.props.imgData.height){var o=this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]],i=this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+1],c=this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+2],l=this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+3];if(this.props.pixelSample){var u=[o,i,c,l,r[0],r[1]];this.props.updatePixel(u)}else this.props.sampleColour(o,i,c,l)}}else this.props.pixelSample?(this.props.switchSample("PIXEL"),alert("You must upload an image first. Click the upload button to upload an image.")):this.recenter(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container",id:"container"},r.a.createElement("div",{className:"grid"},r.a.createElement("label",null,"Old Preview"),r.a.createElement("label",null,"New Preview"),r.a.createElement("div",{className:"transparent"},r.a.createElement("canvas",{id:"canvas",onClick:this.handleClick})),r.a.createElement("div",{className:"transparent"},r.a.createElement("canvas",{id:"newCanvas",onClick:this.handleClick})),r.a.createElement(de,{change:this.imageChange}),r.a.createElement(fe,{download:this.download})),r.a.createElement(le,null),r.a.createElement(pe,null))}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(n.Component),ve=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.image)}),{setImgData:function(e,t){return function(a){return a({type:"SET",isNewCanvas:e,data:t}),Promise.resolve()}},setFileName:function(e){return{type:"NAME",name:e}},refresh:function(){return{type:"REFRESH"}},center:function(e,t,a){return{type:"CENTER",canvas:e,pageX:t,pageY:a}},updatePixel:function(e){return{type:"PIXEL",pixel:e}},basicImgEffect:B,swap:U,switchSample:R,sampleColour:X})(be);a.d(t,"store",(function(){return Ee}));var Ee=Object(l.d)(P,{},Object(l.a)(u.a));i.a.render(r.a.createElement(c.a,{store:Ee},r.a.createElement(ve,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f54a451d.chunk.js.map