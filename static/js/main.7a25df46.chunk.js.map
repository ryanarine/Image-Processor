{"version":3,"sources":["Components/Tools/utils.js","Reducers/imageReducer.js","utils.js","Reducers/replaceReducer.js","Reducers/rootReducer.js","Actions/toolActions.js","Actions/replaceActions.js","Images/SvgIcons.js","Components/Inputs/ColorInputs.js","Components/Tools/FindActions.js","Components/Tools/ReplaceActions.js","Components/Tools/ToleranceActions.js","Components/Tools/FrtHeader.js","constants.js","Components/Inputs/Find.js","Components/Inputs/Replace.js","Components/Inputs/Tolerance.js","Components/Tools/FrtValues.js","Components/Tools/ReplaceButtons.js","Components/Tools/Tools.js","Components/Tools/Lighten.js","Components/Tools/SimpleTools.js","Components/Canvas/index.js","Components/PreviewButtons/Download.js","Components/PreviewButtons/Upload.js","App.js","theme.js","index.js","Images/transparent.jpg"],"names":["isMatch","comparisons","pixel","search","percentages","tolerance","match","totalValue","slice","reduce","sum","val","values","map","index","offset","Math","abs","alert","operate","operators","data","initialState","imgData","newData","x1","x2","y1","y2","pixelSample","colourSample","zoom1","zoom2","mapEffectToFunction","GRAYSCALE","avg","i","length","round","NEGATIVE","BRIGHT","mult","REPLACE","oldVal","newVal","smallestSize","zoomRatio","boundary","point","canvas","imgWidth","imgHeight","width","height","redraw","x","y","canvasName","document","getElementById","getContext","putImageData","copy","data1","data2","forEach","changeCursor","sample","cursor","className","imageReducer","state","action","type","isNewCanvas","fileName","name","id","pageX","pageY","halfX","halfY","ratioX","scrollWidth","ratioY","scrollHeight","offsetLeft","offsetTop","centerPoint","ctx","width1","height1","width2","height2","min","Uint8ClampedArray","row","col","ImageData","effect","payload","body","style","section","Image","oldColour","adjacent","visited","Array","frontier","pop","flattenedIndex","push","adj","newX","newY","adjVisitedIndex","getSection","copyToNew","imgFile","zoom","isZoomOut","newZoom","max","convertToPercentage","value","total","cc","fc","fp","oc","rc","tc","replaceReducer","prefix","red","green","blue","startsWith","operator","isNaN","Number","toFixed","substring","isOperator","option","r","g","b","a","combineReducers","image","replace","updatePixel","switchSample","basicImgEffect","swap","center","updateRGB","updateInput","event","target","updateOption","updatePercentage","sampleColour","CursorIcon","SvgIcon","viewBox","fill","d","DropperIcon","CursorDropperIcon","transform","useStyles","makeStyles","root","border","borderRadius","position","margin","text","textShadow","color","opacity","pointerEvents","right","top","padding","ColorInputs","props","stateColours","useSelector","findPercentages","replaceOperators","dispatch","useDispatch","cp","useRef","handleOnChange","useCallback","debounce","exec","groups","hexString","c","toString","padStart","toUpperCase","join","disabled","some","p","o","Paper","elevation","backgroundColor","onClick","current","click","Typography","align","ref","onChange","e","theme","display","gridAutoFlow","gridGap","spacing","justifyContent","alignItems","FindActions","enqueueSnackbar","useSnackbar","IconButton","title","variant","anchorOrigin","vertical","horizontal","gap","ReplaceActions","ToleranceActions","FrtHeader","colours","fullColours","mapCompareToTitle","compare","isPercentage","middle","suffix","Find","isAlpha","ButtonGroup","size","comparison","Button","key","TextField","fullWidth","InputProps","endAdornment","InputAdornment","inputProps","mapOperatorToTitle","colour","msg","Replace","isPercentageOp","Tolerance","FrtValues","frt","Fragment","Box","replace_button_container","gridTemplateColumns","gridColumn","ReplaceButtons","frtGrid","Tools","MAX_VALUE","input","Lighten","multiplier","useState","setValue","maxWidth","SimpleTools","ratio","backgroundImage","Transparent","box","Canvas","canvasId","recenter","flipped","Download","anchor","setAnchor","handleClose","handleDownload","download","currentTarget","xmlns","enableBackground","Menu","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","Upload","uploadRef","change","hidden","App","imageChange","file","files","img","reader","FileReader","onload","read","imgEvent","createElement","drawImage","getImageData","setImgData","then","refresh","filedata","result","src","setFileName","lastIndexOf","readAsDataURL","link","setAttribute","toDataURL","remove","this","Component","connect","Promise","resolve","createMuiTheme","palette","primary","main","light","secondary","typography","fontFamily","MuiTextField","overrides","MuiButton","textTransform","MuiOutlinedInput","inputMarginDense","paddingTop","paddingBottom","store","createStore","rootReducer","applyMiddleware","thunk","useNotistackStyles","contentRoot","ReactDOM","render","children","classes","maxSnack","module","exports"],"mappings":"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","file":"static/js/main.7a25df46.chunk.js","sourcesContent":["/**\n * Change the data of an image\n * @param {Uint8ClampedArray} data - Image data\n * @param {Array} comparisons - Comparison operators, each one is one of [=,>,>=,<,<=]\n * @param {Array} oldVal - A pixel or percentage to be matched against according to comparisons\n * @param {Array} percentages - Boolean array indicating whether to search for absolute or relative values\n * @param {Array} operators  - Mathematical operators, each one is one of [=,+,-,*,/]\n * @param {Array} newVal  - A pixel to be operated against according to operators\n * @param {Array} tolerance  - An rgba range\n */\nexport function changeImgData(\n  data,\n  comparisons,\n  oldVal,\n  percentages,\n  operators,\n  newVal,\n  tolerance,\n) {\n  for (let i = 0; i < data.length; i += 4) {\n    if (\n      isMatch(comparisons, data.slice(i, i + 4), oldVal, percentages, tolerance)\n    ) {\n      operate(operators, data, newVal, i);\n    }\n  }\n}\n\n/*\n  -Image is an ImageData objects\n  -pixel ([r,g,b,a,x,y]) is a pixel in Image containing its x and y coordinate\n  -comparisons specify a comparison operator [=,>,>=,<,<=]\n  -percentages is a boolean array indicating whether to search for absolute or relative values\n  -tolerance is an rgba range (only used when the comparison operator is equality)\n  -Returns an array of pixel indices that corresponds to a section in Image originating at pixel with the given tolerance range\n*/\nexport function getSection(\n  Image,\n  pixel,\n  comparisons,\n  oldColour,\n  percentages,\n  tolerance,\n) {\n  const [width, height, data] = [Image.width, Image.height, Image.data];\n  // Adjacent offsets of pixels (Up, Right, Down, Left)\n  const adjacent = [\n    [0, -1],\n    [1, 0],\n    [0, 1],\n    [-1, 0],\n  ];\n  // visited[i] indicates whether pixel i has been added to the frontier before\n  const visited = new Array(width * height);\n  // The array of pixels to return\n  const section = [];\n  let [x, y] = [pixel[4], pixel[5]];\n  // The array of pixels that need to be checked if they belong to the section\n  const frontier = [[x, y]];\n  visited[y * width + x] = true;\n\n  while (frontier.length !== 0) {\n    [x, y] = frontier.pop();\n    // Check if pixel has valid coordinates\n    if (x < 0 || x >= width || y < 0 || y >= height) continue;\n    // Get the colour of the pixel\n    const flattenedIndex = y * width * 4 + x * 4;\n    const colour = data.slice(flattenedIndex, flattenedIndex + 4);\n    // Check that the pixel colour is a match\n    if (isMatch(comparisons, colour, oldColour, percentages, tolerance)) {\n      // Add pixel to section\n      section.push(flattenedIndex);\n      // Add adjacent pixels to frontier\n      // eslint-disable-next-line\n      adjacent.forEach((adj) => {\n        // If they have not been added before\n        const newX = x + adj[0];\n        const newY = y + adj[1];\n        if (newX < 0 || newX >= width || newY < 0 || newY >= height) return;\n\n        const adjVisitedIndex = newY * width + newX;\n        if (!visited[adjVisitedIndex]) {\n          visited[adjVisitedIndex] = true;\n          frontier.push([newX, newY]);\n        }\n      });\n    }\n  }\n  return section;\n}\n\n// Grayscales the image data\nexport function grayscale(data) {\n  let avg = 0;\n  for (let i = 0; i < data.length; i += 4) {\n    avg = Math.round((data[i] + data[i + 1] + data[i + 2]) / 3);\n    data[i] = avg;\n    data[i + 1] = avg;\n    data[i + 2] = avg;\n  }\n}\n\n// Negates the image data\nexport function negative(data) {\n  for (let i = 0; i < data.length; i += 4) {\n    data[i] = 255 - data[i];\n    data[i + 1] = 255 - data[i + 1];\n    data[i + 2] = 255 - data[i + 2];\n  }\n}\n\n// Change the light intensity of the data by the given multiplier\nexport function lighten(data, mult) {\n  for (let i = 0; i < data.length; i += 4) {\n    data[i] = data[i] * mult;\n    data[i + 2] = data[i + 2] * mult;\n    data[i + 1] = data[i + 1] * mult;\n  }\n}\n\n// returns true if the pixel matches the search values according to the comparison option and the tolerance range\nfunction isMatch(comparisons, pixel, search, percentages, tolerance) {\n  let match = true;\n  let compare;\n  const totalValue = pixel.slice(0, 3).reduce((sum, val) => sum + val);\n  const values = pixel.map((val, index) =>\n    percentages[index] ? (val / totalValue) * 100 : val,\n  );\n  for (let offset = 0; offset < 4; offset++) {\n    compare = comparisons[offset];\n    switch (compare) {\n      case \"=\":\n        match =\n          match &&\n          Math.abs(values[offset] - search[offset]) <= tolerance[offset];\n        break;\n      case \">\":\n        match = match && values[offset] > search[offset];\n        break;\n      case \">=\":\n        match = match && values[offset] >= search[offset];\n\n        break;\n      case \"<\":\n        match = match && values[offset] < search[offset];\n        break;\n      case \"<=\":\n        match = match && values[offset] <= search[offset];\n        break;\n      default:\n        alert(\n          \"Something went terribly wrong. Please refresh the page and try again\",\n        );\n        return;\n    }\n  }\n  return match;\n}\n\n// Change the pixel in data specified by index by applying the arithmetic operator on it and pixel2's values\nexport function operate(operators, data, pixel, index) {\n  let operator = operators;\n  for (let offset = 0; offset < 4; offset++) {\n    operator = operators[offset];\n    switch (operator) {\n      case \"=\":\n        data[index + offset] = pixel[offset];\n        break;\n      case \"+\":\n        data[index + offset] += pixel[offset];\n        break;\n      case \"-\":\n        data[index + offset] -= pixel[offset];\n        break;\n      case \"*\":\n        data[index + offset] *= pixel[offset];\n        break;\n      case \"/\":\n        data[index + offset] /= pixel[offset];\n        break;\n      default:\n        alert(\n          \"Something went terribly wrong. Please refresh the page and try again\",\n        );\n        return;\n    }\n  }\n}\n","import {\n  grayscale,\n  negative,\n  lighten,\n  changeImgData,\n  getSection,\n  operate,\n} from \"Components/Tools/utils\";\n\nexport const initialState = {\n  imgData: null,\n  newData: null,\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  y2: 0,\n  pixelSample: false,\n  colourSample: false,\n  pixel: null,\n  zoom1: 0,\n  zoom2: 0,\n};\n\nconst mapEffectToFunction = {\n  GRAYSCALE: grayscale,\n  NEGATIVE: negative,\n  BRIGHT: lighten,\n  REPLACE: changeImgData,\n};\nconst smallestSize = 50;\nconst zoomRatio = 1.5;\n\nfunction imageReducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET\":\n      return action.isNewCanvas\n        ? { ...state, newData: action.data }\n        : { ...state, imgData: action.data };\n    case \"NAME\":\n      return { ...state, fileName: action.name };\n    case \"REFRESH\":\n      return {\n        ...state,\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0,\n        sample: false,\n        pixel: null,\n        zoom1: 0,\n        zoom2: 0,\n      };\n    case \"CENTER\":\n      let canvas = action.canvas;\n      let [x, y, imgData] =\n        canvas.id === \"canvas\"\n          ? [state.x1, state.y1, state.imgData]\n          : [state.x2, state.y2, state.newData];\n      // Get the appropriate center point\n      let point = centerPoint(\n        action.canvas,\n        x,\n        y,\n        imgData.width,\n        imgData.height,\n        action.pageX,\n        action.pageY,\n      );\n      // Recenter image if the center point has changed\n      if (point[0] !== x || point[1] !== y) {\n        let ctx = canvas.getContext(\"2d\");\n        // Update state\n        canvas.id === \"newCanvas\"\n          ? ([state.x2, state.y2] = point)\n          : ([state.x1, state.y1] = point);\n        // Construct the recentered image data\n        let [width1, height1] = [imgData.width, imgData.height];\n        let [width2, height2] = [width1 - point[0], height1 - point[1]];\n        // Construct only the parts we need\n        width2 = Math.min(canvas.width, width2);\n        height2 = Math.min(canvas.height, height2);\n        let data = new Uint8ClampedArray(width2 * height2 * 4);\n        // Copy the image data\n        for (let row = 0; row < height2; row++) {\n          for (let col = 0; col < width2; col++) {\n            for (let val = 0; val < 4; val++) {\n              data[row * width2 * 4 + col * 4 + val] =\n                imgData.data[\n                  (point[1] + row) * width1 * 4 + (point[0] + col) * 4 + val\n                ];\n            }\n          }\n        }\n        // Draw image\n        imgData = new ImageData(data, width2, height2);\n        ctx.putImageData(imgData, 0, 0);\n      }\n      return state;\n    case \"PIXEL\":\n      changeCursor(state.pixelSample);\n      return { ...state, pixelSample: false, pixel: action.pixel };\n    case \"SAMPLE\":\n      if (action.sample === \"PIXEL\") {\n        changeCursor(state.pixelSample);\n        return {\n          ...state,\n          pixelSample: !state.pixelSample,\n          colourSample: false,\n        };\n      } else if (action.sample === \"COLOUR\") {\n        changeCursor(state.colourSample, false);\n        return {\n          ...state,\n          pixelSample: false,\n          colourSample: !state.colourSample,\n        };\n      }\n      return state;\n    case \"BASIC\":\n      if (state.newData) {\n        // Get the effect\n        let effect = mapEffectToFunction[action.effect];\n        // Copy old data to new data\n        copy(state.imgData.data, state.newData.data);\n        // Apply effect and redraw\n        if (action.payload) {\n          effect(state.newData.data, ...action.payload);\n        } else {\n          effect(state.newData.data);\n        }\n        redraw(state.x2, state.y2, state.newData);\n      }\n      return state;\n    case \"SECTION\": {\n      if (state.pixel && state.newData) {\n        document.body.style.cursor = \"progress\";\n        const {\n          comparisons,\n          oldVal,\n          percentages,\n          tolerance,\n          newVal,\n          operators,\n        } = action;\n        const section = getSection(\n          state.imgData,\n          state.pixel,\n          comparisons,\n          oldVal,\n          percentages,\n          tolerance,\n        );\n        const data = state.newData.data;\n        copy(state.imgData.data, state.newData.data);\n        // Replace the colour of each pixel in the section\n        section.forEach((pixel) => {\n          operate(operators, data, newVal, pixel);\n        });\n        redraw(state.x2, state.y2, state.newData);\n        document.body.style.cursor = \"default\";\n      } else if (!state.pixel) {\n        alert(\n          \"You must first specify a section to paint. Click the cursor icon and then click on an area in the left canvas.\",\n        );\n      }\n      return state;\n    }\n    case \"SWAP\": {\n      if (state.imgData) {\n        let [canvasName, imgFile, x, y] = action.copyToNew\n          ? [\"newCanvas\", state.imgData, state.x2, state.y2]\n          : [\"canvas\", state.newData, state.x1, state.y1];\n        const canvas = document.getElementById(canvasName);\n        const ctx = canvas.getContext(\"2d\");\n        ctx.putImageData(imgFile, -x, -y, x, y, canvas.width, canvas.height);\n        let data = new Uint8ClampedArray(imgFile.data);\n        let copy = new ImageData(data, imgFile.width, imgFile.height);\n        return action.copyToNew\n          ? { ...state, newData: copy }\n          : { ...state, imgData: copy };\n      }\n      return state;\n    }\n    case \"ZOOM\": {\n      if (state.imgData) {\n        let [canvasName, imgFile, zoom, x, y] = action.isNewCanvas\n          ? [\"newCanvas\", state.newData, state.zoom2, state.x2, state.y2]\n          : [\"canvas\", state.imgData, state.zoom1, state.x1, state.y1];\n        const canvas = document.getElementById(canvasName);\n        // Do nothing if the action is zooming out and the canvas completely contains the image unless user has zoomed in before\n        // Note: zoom < 0 is only there to maintain consistency (otherwise user might be able to zoom in but not zoom back out)\n        if (\n          !action.isZoomOut ||\n          zoom < 0 ||\n          imgFile.width > canvas.scrollWidth ||\n          imgFile.height > canvas.scrollHeight\n        ) {\n          let newZoom = action.isZoomOut ? zoom + 1 : zoom - 1;\n          let mult = zoomRatio ** newZoom;\n          // Canvas dimensions is always square so images look appropriate\n          let width = Math.round(canvas.scrollWidth * mult);\n          // Set zoom bounds while still maintaining consistency\n          if (\n            (action.isZoomOut && zoom >= 0) ||\n            (!action.isZoomOut && zoom <= 0)\n          ) {\n            if (!action.isZoomOut && width < smallestSize) {\n              width = smallestSize;\n            } else if (\n              action.isZoomOut &&\n              width >= imgFile.width &&\n              width >= imgFile.height\n            ) {\n              width = Math.max(imgFile.width, imgFile.height);\n            }\n          }\n          // Redraw image if the zoom was valid\n          if (width !== canvas.width) {\n            // Set the zoom\n            canvas.width = canvas.height = width;\n            // Top-left pixel might have to change due to boundaries\n            [x, y] = boundary([x, y], canvas, imgFile.width, imgFile.height);\n            // Update state and redraw\n            state = action.isNewCanvas\n              ? { ...state, x2: x, y2: y, zoom2: newZoom }\n              : { ...state, x1: x, y1: y, zoom1: newZoom };\n            redraw(x, y, imgFile, canvasName);\n          }\n        }\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n}\n\n/*\n-x and y are the x and y coordinates of the top left pixel on the canvas\n-width and height are the width and height of the canvas image data\n-pageX and pageY are the x and y coordinates of the clicked point on the page if there was a clicked point\n-Returns the x and y coordinates of the center pixel on the canvas\n*/\nfunction centerPoint(canvas, x, y, width, height, pageX, pageY) {\n  let halfX = canvas.width / 2;\n  let halfY = canvas.height / 2;\n  let ratioX = canvas.width / canvas.scrollWidth;\n  let ratioY = canvas.height / canvas.scrollHeight;\n  // x/y + offsetX/offsetY - offsetLeft/offsetTop = x/y coordinate of clicked point\n  // Multiplied by ratioX/ratioY = x/y coordinate of clicked pixel\n  // Subtract by half to get the top left coordinate if clicked point was the center\n  let point = [\n    Math.round(x + (pageX - canvas.offsetLeft) * ratioX - halfX),\n    Math.round(y + (pageY - canvas.offsetTop) * ratioY - halfY),\n  ];\n  // Compensate for boundaries\n  return boundary(point, canvas, width, height);\n}\n\n// Translates the point if it is off the boundary specified by the canvas and its image data\nfunction boundary(point, canvas, imgWidth, imgHeight) {\n  // imgWidth - canvas.width = x-coordinate of leftmost pixels when rightmost pixels are on the boundary\n  // imgHeight - canvas.height = y-coordinate of topmost pixels when bottommost pixels are on the boundary\n  if (imgWidth < canvas.width || point[0] < 0) {\n    point[0] = 0;\n  } else {\n    point[0] =\n      point[0] > imgWidth - canvas.width ? imgWidth - canvas.width : point[0];\n  }\n  if (imgHeight < canvas.height || point[1] < 0) {\n    point[1] = 0;\n  } else {\n    point[1] =\n      point[1] > imgHeight - canvas.height\n        ? imgHeight - canvas.height\n        : point[1];\n  }\n  return point;\n}\n\n// Redraw the canvas\nfunction redraw(x, y, data, canvasName = \"newCanvas\") {\n  let canvas = document.getElementById(canvasName);\n  canvas\n    .getContext(\"2d\")\n    .putImageData(data, -x, -y, x, y, canvas.width, canvas.height);\n}\n\n// Copy the image data from data1 into data2\nfunction copy(data1, data2) {\n  data1.forEach((pixel, index) => (data2[index] = pixel));\n}\n\n// Change the cursor style\nfunction changeCursor(sample, isPixelSample = true) {\n  let cursor = isPixelSample ? \"container cross\" : \"container dropper\";\n  document.getElementById(\"container\").className = sample\n    ? \"container\"\n    : cursor;\n}\n\nexport default imageReducer;\n","export const convertToPercentage = (value, total) => {\n  if (value === 0 && total === 0) {\n    return 33;\n  }\n  return Math.round((value * 100) / total);\n};\n","import { convertToPercentage } from \"utils\";\n\nconst initialState = {\n  cc: [\"=\", \"=\", \"=\", \"=\"],\n  fc: [255, 255, 255, 255],\n  fp: [false, false, false, false],\n  oc: [\"=\", \"=\", \"=\", \"=\"],\n  rc: [255, 255, 255, 255],\n  tc: [10, 10, 10, 10],\n};\n\nfunction replaceReducer(state = initialState, action) {\n  switch (action.type) {\n    case \"UPDATERGB\": {\n      const { prefix, red, green, blue } = action;\n      state[prefix] = [red, green, blue, state[prefix][3]];\n      return state;\n    }\n\n    case \"UPDATEINPUT\": {\n      let [name, value, index] = [action.name, action.value, action.index];\n      let max = 255;\n      if (name.startsWith(\"r\")) {\n        let operator = state.oc[index];\n        if (operator === \"*\" || operator === \"/\") {\n          max = 500;\n        }\n      }\n      if (!isNaN(value) && value >= 0 && value <= max) {\n        value = Number(Number(value).toFixed());\n        state[name.substring(0, 2)][index] = value;\n        state[name.substring(0, 2)] = [...state[name.substring(0, 2)]];\n        return state;\n      }\n      return state;\n    }\n\n    case \"UPDATEOPTION\": {\n      let [index, option, isOperator] = [\n        action.index,\n        action.value,\n        action.isOperator,\n      ];\n      if (\n        isOperator &&\n        state.rc[index] > 255 &&\n        option !== \"*\" &&\n        option !== \"/\"\n      ) {\n        state.rc[index] = 255;\n      }\n      if (isOperator) {\n        state.oc[index] = option;\n      } else {\n        state.cc[index] = option;\n      }\n      return state;\n    }\n\n    case \"UPDATEPERCENTAGE\": {\n      const index = action.index;\n      state.fp[index] = !state.fp[index];\n      if (state.fp[index] && state.fc[index] > 100) {\n        state.fc[index] = 100;\n      }\n      return state;\n    }\n\n    case \"SAMPLECOLOUR\":\n      const { r, g, b, a } = action;\n      const total = r + g + b;\n\n      state.fc = [r, g, b, a].map((value, index) =>\n        state.fp[index] ? convertToPercentage(value, total) : value\n      );\n      return state;\n    default:\n      return state;\n  }\n}\n\nexport default replaceReducer;\n","import { combineReducers } from \"redux\";\nimport imageReducer from \"./imageReducer\";\nimport replaceReducer from \"./replaceReducer\";\n\nexport default combineReducers({\n  image: imageReducer,\n  replace: replaceReducer,\n});\n","export const setImgData = (isNewCanvas, data) => (dispatch) => {\n  dispatch({ type: \"SET\", isNewCanvas, data });\n  return Promise.resolve();\n};\n\nexport const setFileName = (name) => ({ type: \"NAME\", name });\n\nexport const refresh = () => ({ type: \"REFRESH\" });\n\nexport const updatePixel = (pixel) => ({ type: \"PIXEL\", pixel });\n\nexport const switchSample = (sample) => ({ type: \"SAMPLE\", sample });\n\nexport const basicImgEffect = (effect, payload) => ({\n  type: \"BASIC\",\n  effect,\n  payload,\n});\n\nexport const section = (\n  comparisons,\n  oldVal,\n  percentages,\n  operators,\n  newVal,\n  tolerance,\n) => ({\n  type: \"SECTION\",\n  comparisons,\n  oldVal,\n  percentages,\n  operators,\n  newVal,\n  tolerance,\n});\n\nexport const swap = (copyToNew) => ({ type: \"SWAP\", copyToNew });\n\nexport const zoom = (isZoomOut, isNewCanvas) => ({\n  type: \"ZOOM\",\n  isZoomOut,\n  isNewCanvas,\n});\n\nexport const center = (canvas, pageX, pageY) => ({\n  type: \"CENTER\",\n  canvas,\n  pageX,\n  pageY,\n});\n","export const updateRGB = ({ prefix, red, green, blue }) => ({\n  type: \"UPDATERGB\",\n  prefix,\n  red,\n  green,\n  blue,\n});\n\nexport const updateInput = (event, index) => ({\n  type: \"UPDATEINPUT\",\n  name: event.target.name,\n  value: event.target.value,\n  index,\n});\n\nexport const updateOption = (index, value, isOperator) => ({\n  type: \"UPDATEOPTION\",\n  index,\n  value,\n  isOperator,\n});\n\nexport const updatePercentage = (index) => ({\n  type: \"UPDATEPERCENTAGE\",\n  index,\n});\n\nexport const sampleColour = (r, g, b, a) => ({\n  type: \"SAMPLECOLOUR\",\n  r,\n  g,\n  b,\n  a,\n});\n","import React from \"react\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\n\nexport const CursorIcon = (\n  <SvgIcon\n    x=\"0px\"\n    y=\"0px\"\n    viewBox=\"-100 0 500 500\"\n    width=\"300\"\n    height=\"300\"\n    fill=\"#000000\"\n  >\n    <g>\n      <path d=\"M151.09 62.25c6.37,6.37 10.33,15.17 10.33,24.85l0 97.21c14.04,-11.12 34.18,-9.72 46.92,2.78 5.94,5.83 9.86,13.68 10.48,22.38 14.04,-11.19 34.24,-9.83 47.01,2.71 5.87,5.77 9.78,13.52 10.46,22.11 13.05,-9.63 31.02,-8.06 42.57,3.25 5.83,5.72 9.64,14.01 9.78,22.25l0.14 122.46c0.06,49.97 -35.59,90.34 -86.43,90.34l-84.09 0c-30.6,0 -57.96,-13.84 -70.36,-42.81 -10.06,-23.51 -22.84,-45.95 -36.78,-67.41 -14.05,-21.64 -29.27,-42.26 -44.09,-62.01 -5.64,-7.53 -8.02,-16.78 -6.65,-26.13 2.75,-18.72 19.75,-32.14 38.64,-29.39 8.79,1.29 17.28,5.87 23.85,12.85l28.19 29.89 0 -200.47c0,-9.68 3.95,-18.48 10.33,-24.85 13.68,-13.69 36.01,-13.69 49.7,0zm125.28 200.51l0.03 35.31c0,3.69 -2.98,6.67 -6.67,6.67 -3.68,0 -6.67,-2.98 -6.67,-6.67l-0.03 -35.31c-0.01,-8.57 -0.03,-17.19 -0.03,-25.79 0,-5.93 -2.53,-11.34 -6.54,-15.28 -8.63,-8.47 -22.53,-8.71 -31.15,-0.1 -5.77,5.78 -6.37,11.19 -6.39,18.38l-0.12 39.78c0,3.69 -3.03,6.72 -6.72,6.72 -3.68,0 -6.67,-2.98 -6.67,-6.67l0.12 -40.08c0.03,-9.25 -0.02,-18.55 -0.02,-27.83 0,-5.93 -2.53,-11.34 -6.54,-15.28 -8.63,-8.48 -22.53,-8.72 -31.15,-0.1 -4.73,4.73 -6.44,10.21 -6.42,16.66l0.11 44.3c0,3.69 -2.99,6.68 -6.67,6.68 -3.69,0 -6.68,-2.99 -6.68,-6.68l-0.11 -44.35c-0.11,-41.96 -0.03,-84.03 -0.03,-126.03 0,-5.98 -2.45,-11.43 -6.4,-15.38 -8.49,-8.48 -22.28,-8.48 -30.76,0 -3.95,3.95 -6.41,9.4 -6.41,15.38l0 217.19c0,6.11 -7.37,9.17 -11.56,4.71l-39.75 -42.17c-4.51,-4.78 -10.21,-7.91 -16.01,-8.76 -11.65,-1.69 -21.82,6.59 -23.51,18.08 -0.84,5.75 0.65,11.62 4.11,16.23 15,19.98 30.39,40.85 44.59,62.7 14.34,22.08 27.49,45.18 37.88,69.45 10.25,23.96 32.91,34.66 58.06,34.66l84.09 0c43.92,0 72.91,-34.61 72.91,-77.39l0 -121.31c0,-5.21 -2.23,-9.96 -5.77,-13.44 -7.61,-7.45 -19.86,-7.69 -27.46,-0.09 -4.77,4.77 -5.66,9.62 -5.66,15.8z\" />\n      <path d=\"M78.05 131.71c2.65,2.58 2.71,6.81 0.13,9.45 -2.57,2.65 -6.8,2.7 -9.44,0.13 -7.82,-7.62 -14.13,-16.79 -18.45,-27.02 -12.97,-30.75 -6.02,-66.57 17.67,-90.27 32.01,-32 84.55,-32 116.55,0 23.7,23.7 30.65,59.52 17.67,90.27 -4.31,10.23 -10.63,19.4 -18.44,27.02 -2.65,2.57 -6.88,2.52 -9.45,-0.13 -2.57,-2.64 -2.51,-6.87 0.13,-9.45 6.57,-6.39 11.86,-14.07 15.46,-22.62 10.85,-25.71 4.95,-55.83 -14.84,-75.61 -26.8,-26.81 -70.8,-26.81 -97.61,0 -19.78,19.78 -25.68,49.9 -14.84,75.61 3.61,8.55 8.9,16.23 15.46,22.62z\" />\n    </g>\n  </SvgIcon>\n);\n\nexport const DropperIcon = (\n  <SvgIcon height=\"300px\" width=\"300px\" fill=\"#000000\" viewBox=\"0 0 88 88\">\n    <g>\n      <path d=\"M77.0464,2.957a6.6648,6.6648,0,0,0-9.4141,0L62.0039,8.5859,59.7109,6.293a.9994.9994,0,0,0-1.414,0l-6,6a1,1,0,0,0,0,1.414L54.59,16,22.2969,48.293a1.0024,1.0024,0,0,0-.2417.3906l-4,12A1,1,0,0,0,19.32,61.9487l12-4a1.0024,1.0024,0,0,0,.3906-.2417l32.293-32.2929,2.293,2.2929a.9994.9994,0,0,0,1.414,0l6-6a.9994.9994,0,0,0,0-1.414L71.418,18l5.6284-5.6289A6.6516,6.6516,0,0,0,77.0464,2.957ZM30.4639,56.126,20.585,59.4189,23.8779,49.54,41.418,32H54.59ZM56.59,30H43.418L56.0039,17.4141,62.59,24Zm10.4141-4.4141-2.293-2.2929-8-8L54.418,13l4.5859-4.5859L71.59,21ZM75.6323,10.957l-5.6284,5.6289L63.418,10l5.6284-5.6289a4.6569,4.6569,0,0,1,6.5859,6.5859ZM16.21,65.3916C15.4727,66.354,9.0039,74.9126,9.0039,79a8,8,0,0,0,16,0c0-4.0874-6.4687-12.646-7.206-13.6084A1.037,1.037,0,0,0,16.21,65.3916ZM17.0039,85a6.0066,6.0066,0,0,1-6-6c0-2.5454,3.8013-8.3022,6-11.3257,2.1987,3.0235,6,8.78,6,11.3257A6.0066,6.0066,0,0,1,17.0039,85Z\" />\n    </g>\n  </SvgIcon>\n);\n\nexport const CursorDropperIcon = (\n  <SvgIcon\n    height=\"300\"\n    width=\"300\"\n    fill=\"#000000\"\n    viewBox=\"0 0 328.77999 472.58\"\n  >\n    <g id=\"g10\" transform=\"translate(0.00193594,-0.41903372)\">\n      <path\n        d=\"M 157.66476,89.569196 161.42,184.31 c 14.04,-11.12 34.18,-9.72 46.92,2.78 5.94,5.83 9.86,13.68 10.48,22.38 14.04,-11.19 34.24,-9.83 47.01,2.71 5.87,5.77 9.78,13.52 10.46,22.11 13.05,-9.63 31.02,-8.06 42.57,3.25 5.83,5.72 9.64,14.01 9.78,22.25 l 0.14,122.46 c 0.06,49.97 -35.59,90.34 -86.43,90.34 h -84.09 c -30.6,0 -57.96,-13.84 -70.36,-42.81 C 77.84,406.27 65.06,383.83 51.12,362.37 37.07,340.73 21.85,320.11 7.03,300.36 1.39,292.83 -0.99,283.58 0.38,274.23 c 2.75,-18.72 19.75,-32.14 38.64,-29.39 8.79,1.29 17.28,5.87 23.85,12.85 l 28.19,29.89 V 87.11 l 16.19434,-24.644234 25.16237,-0.112883 z M 276.37,262.76 l 0.03,35.31 c 0,3.69 -2.98,6.67 -6.67,6.67 -3.68,0 -6.67,-2.98 -6.67,-6.67 l -0.03,-35.31 c -0.01,-8.57 -0.03,-17.19 -0.03,-25.79 0,-5.93 -2.53,-11.34 -6.54,-15.28 -8.63,-8.47 -22.53,-8.71 -31.15,-0.1 -5.77,5.78 -6.37,11.19 -6.39,18.38 l -0.12,39.78 c 0,3.69 -3.03,6.72 -6.72,6.72 -3.68,0 -6.67,-2.98 -6.67,-6.67 l 0.12,-40.08 c 0.03,-9.25 -0.02,-18.55 -0.02,-27.83 0,-5.93 -2.53,-11.34 -6.54,-15.28 -8.63,-8.48 -22.53,-8.72 -31.15,-0.1 -4.73,4.73 -6.44,10.21 -6.42,16.66 l 0.11,44.3 c 0,3.69 -2.99,6.68 -6.67,6.68 -3.69,0 -6.68,-2.99 -6.68,-6.68 L 148.05,213.12 148.02,87.09 132.41671,62.352883 118.26284,62.671533 104.45,87.09 v 217.19 c 0,6.11 -7.37,9.17 -11.56,4.71 L 53.14,266.82 c -4.51,-4.78 -10.21,-7.91 -16.01,-8.76 -11.65,-1.69 -21.82,6.59 -23.51,18.08 -0.84,5.75 0.65,11.62 4.11,16.23 15,19.98 30.39,40.85 44.59,62.7 14.34,22.08 27.49,45.18 37.88,69.45 10.25,23.96 32.91,34.66 58.06,34.66 h 84.09 c 43.92,0 72.91,-34.61 72.91,-77.39 V 260.48 c 0,-5.21 -2.23,-9.96 -5.77,-13.44 -7.61,-7.45 -19.86,-7.69 -27.46,-0.09 -4.77,4.77 -5.66,9.62 -5.66,15.8 z\"\n        id=\"path6\"\n      />\n      <path\n        d=\"m 78.05,132.12901 c 2.65,2.58 2.71,6.81 0.13,9.45 -2.57,2.65 -6.8,2.7 -9.44,0.13 -7.82,-7.62 -14.13,-16.79 -18.45,-27.01999 -12.97,-30.749987 -6.02,-66.569987 17.67,-90.269985 32.01,-32.0000017 84.55,-32.0000017 116.55,0 23.7,23.699998 30.65,59.519998 17.67,90.269985 -4.31,10.22999 -10.63,19.39999 -18.44,27.01999 -2.65,2.57 -6.88,2.52 -9.45,-0.13 -2.57,-2.64 -2.51,-6.87 0.13,-9.45 6.57,-6.39 11.86,-14.06999 15.46,-22.61999 10.85,-25.709987 4.95,-55.829987 -14.84,-75.609986 -26.8,-26.8099993 -70.8,-26.8099993 -97.61,0 -19.78,19.779999 -25.68,49.899999 -14.84,75.609986 3.61,8.55 8.9,16.22999 15.46,22.61999 z\"\n        id=\"path8\"\n      />\n    </g>\n    <path\n      d=\"m 158.03416,305.82395 3.8e-4,-214.682283 c -9e-5,-0.729446 -0.17734,-1.448915 -0.51781,-2.101743 L 129.6967,35.856406 c -1.81187,-3.465259 -6.98507,-3.465826 -8.79776,-9.51e-4 L 93.078791,89.038967 c -0.34047,0.652835 -0.51772,1.372309 -0.5178,2.10176 l -3.2e-4,214.681583 c 0,0 20.242579,-0.0377 30.363879,-0.0382 11.70321,-7.1e-4 30.63998,0.0932 35.10961,0.04 4.46963,-0.0532 0,-1e-4 0,-1e-4 z m -55.63978,-213.572077 22.90291,-43.78267 22.90291,43.782661 -3.4e-4,116.605156 -45.80585,43.78338 z m -3.4e-4,173.684407 45.80582,-43.78332 2e-5,83.67027 -45.80585,7.1e-4 z\"\n      id=\"path2\"\n    />\n  </SvgIcon>\n);\n","import React, { useCallback, useRef } from \"react\";\nimport { Paper, Typography, debounce } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateRGB } from \"Actions/replaceActions\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: 125,\n    height: 50,\n    border: \"0px solid black\",\n    borderRadius: \"4px\",\n    cursor: \"pointer\",\n    position: \"relative\",\n    margin: \"auto\",\n  },\n  text: {\n    textShadow: \"0px 20px 0px white\",\n  },\n  color: {\n    opacity: 0,\n    pointerEvents: \"none\",\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    padding: 0,\n    border: 0,\n  },\n});\n\nfunction ColorInputs(props) {\n  const { prefix } = props;\n  const { root, text, color } = useStyles();\n  const stateColours = useSelector((state) =>\n    state.replace[prefix].slice(0, 3)\n  );\n  const findPercentages = useSelector((state) => state.replace.fp);\n  const replaceOperators = useSelector((state) => state.replace.oc);\n  const dispatch = useDispatch();\n  const cp = useRef();\n\n  const handleOnChange = useCallback(\n    debounce((value) => {\n      const hexRegex =\n        /#(?<red>[0-9a-f][0-9a-f])(?<green>[0-9a-f][0-9a-f])(?<blue>[0-9a-f][0-9a-f])/;\n      const matches = hexRegex.exec(value);\n      const { red, green, blue } = matches.groups;\n      dispatch(\n        updateRGB({\n          prefix,\n          red: Number(`0x${red}`),\n          green: Number(`0x${green}`),\n          blue: Number(`0x${blue}`),\n        })\n      );\n    }, 5),\n    [dispatch, prefix]\n  );\n\n  const hexString = `#${stateColours.map((c) => c.toString(16).padStart(2, \"0\").toUpperCase()).join(\"\")}`;\n  let disabled = false;\n  if (prefix === \"fc\") {\n    disabled = findPercentages.some((p) => p);\n  } else if (prefix === \"rc\") {\n    disabled = replaceOperators.some((o) => o === \"*\" || o === \"/\");\n  }\n\n  return (\n    <>\n      <Paper\n        elevation={2}\n        className={root}\n        style={{\n          backgroundColor: hexString,\n          ...(disabled && { cursor: \"not-allowed\" }),\n        }}\n        onClick={() => {\n          if (!disabled) {\n            cp.current.click();\n          }\n        }}\n      >\n        <Typography className={text} align=\"center\">\n          {hexString}\n        </Typography>\n\n        <input\n          ref={cp}\n          className={color}\n          type=\"color\"\n          value={hexString}\n          onChange={(e) => handleOnChange(e.target.value)}\n        />\n      </Paper>\n    </>\n  );\n}\n\nexport default ColorInputs;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { switchSample } from \"Actions/toolActions\";\nimport { sampleColour } from \"Actions/replaceActions\";\nimport { CursorIcon, DropperIcon, CursorDropperIcon } from \"Images/SvgIcons\";\nimport ColorInputs from \"../Inputs/ColorInputs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridAutoFlow: \"column\",\n    gridGap: theme.spacing(2),\n    width: \"fit-content\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: \"auto\",\n  },\n}));\n\nfunction FindActions() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { root } = useStyles();\n\n  const dispatch = useDispatch();\n  const pixel = useSelector((state) => state.image.pixel);\n\n  const copy = () => {\n    if (pixel) {\n      dispatch(sampleColour(...pixel));\n    } else {\n      enqueueSnackbar(\n        \"You must specify a pixel first. Click on the cursor icon and then click on a pixel on the canvas to do so.\",\n        {\n          variant: \"error\",\n          anchorOrigin: {\n            vertical: \"top\",\n            horizontal: \"center\",\n          },\n        }\n      );\n    }\n  };\n\n  return (\n    <div className={root}>\n      <Typography>Find</Typography>\n      <IconButton\n        onClick={() => dispatch(switchSample(\"PIXEL\"))}\n        type=\"button\"\n        color=\"primary\"\n        title=\"Specify a section on the canvas by clicking on a pixel within that section\"\n      >\n        {CursorIcon}\n      </IconButton>\n      <IconButton\n        onClick={() => dispatch(switchSample(\"COLOUR\"))}\n        type=\"button\"\n        color=\"primary\"\n        title=\"Sample a pixel's colour off one of the canvases\"\n      >\n        {DropperIcon}\n      </IconButton>\n      <IconButton\n        type=\"button\"\n        onClick={copy}\n        color=\"primary\"\n        title=\"Copy the selected pixel's colour to the inputs\"\n      >\n        {CursorDropperIcon}\n      </IconButton>\n      <ColorInputs prefix=\"fc\" />\n    </div>\n  );\n}\n\nexport default FindActions;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport ColorInputs from \"../Inputs/ColorInputs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: 48,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: \"auto\",\n    width: \"fit-content\",\n    gap: `${theme.spacing(2)}px`,\n  },\n}));\n\nfunction ReplaceActions() {\n  const { root } = useStyles();\n\n  return (\n    <div className={root}>\n      <Typography>Replace</Typography>\n      <ColorInputs prefix=\"rc\" />\n    </div>\n  );\n}\n\nexport default ReplaceActions;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport ColorInputs from \"../Inputs/ColorInputs\";\n\nconst useStyles = makeStyles({\n  root: {\n    height: 48,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    gap: \"16px\",\n  },\n});\n\nfunction ToleranceActions() {\n  const { root } = useStyles();\n\n  return (\n    <div className={root}>\n      <Typography>Tolerance</Typography>\n      <ColorInputs prefix=\"tc\" />\n    </div>\n  );\n}\n\nexport default ToleranceActions;\n","import React from \"react\";\nimport FindActions from \"./FindActions\";\nimport ReplaceActions from \"./ReplaceActions\";\nimport ToleranceActions from \"./ToleranceActions\";\n\nfunction FrtHeader() {\n  return (\n    <>\n      <FindActions />\n      <ReplaceActions />\n      <ToleranceActions />\n    </>\n  );\n}\n\nexport default FrtHeader;\n","export const colours = [\"r\", \"g\", \"b\", \"a\"];\nexport const fullColours = [\"red\", \"green\", \"blue\", \"alpha\"];\n\n// First character of the names of the columns in replace grid (Find, Replace, Tolerance)\nexport const columnInitials = [\"f\", \"r\", \"t\"];\n\nexport const comparisons = [\"=\", \">\", \">=\", \"<\", \"<=\"];\n\nexport const operators = [\"=\", \"+\", \"-\", \"*\", \"/\"];\n","import React from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  InputAdornment,\n  TextField,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  updateInput,\n  updateOption,\n  updatePercentage,\n} from \"Actions/replaceActions\";\nimport { colours, comparisons, fullColours } from \"../../constants\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: `${theme.spacing(1)}px`,\n  },\n}));\n\nconst mapCompareToTitle = (compare, value, isPercentage, index) => {\n  const colour = fullColours[index];\n  const prefix = `Select only pixels that have a ${colour} value`;\n  const suffix = isPercentage ? \"% of the pixel's total value\" : \"\";\n  let middle;\n  switch (compare) {\n    case \"=\":\n      middle = \"that is within the tolerance range of\";\n      break;\n    case \">\":\n      middle = \"greater than\";\n      break;\n    case \">=\":\n      middle = \"greater than or equal to\";\n      break;\n    case \"<\":\n      middle = \"less than\";\n      break;\n    case \"<=\":\n      middle = \"less than or equal to\";\n      break;\n    default:\n      return \"\";\n  }\n  return `${prefix} ${middle} ${value}${suffix}`;\n};\n\nexport default function Find(props) {\n  const { index, isAlpha } = props;\n  const { root } = useStyles();\n  const compare = useSelector((state) => state.replace.cc[index]);\n  const value = useSelector((state) => state.replace.fc[index]);\n  const isPercentage = useSelector((state) => state.replace.fp[index]);\n  const dispatch = useDispatch();\n\n  return (\n    <div className={root}>\n      <ButtonGroup variant=\"contained\" size=\"small\">\n        {comparisons.map((comparison) => (\n          <Button\n            key={comparison}\n            onClick={() => dispatch(updateOption(index, comparison, false))}\n            title={mapCompareToTitle(comparison, value, isPercentage, index)}\n            color={compare === comparison ? \"primary\" : \"default\"}\n          >\n            {comparison}\n          </Button>\n        ))}\n      </ButtonGroup>\n      <TextField\n        type=\"number\"\n        variant=\"outlined\"\n        fullWidth={isAlpha}\n        value={value}\n        onChange={(e) => dispatch(updateInput(e, index))}\n        name={\"fc\" + colours[index]}\n        {...(!isAlpha && {\n          InputProps: {\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <Button\n                  onClick={() => dispatch(updatePercentage(index))}\n                  title=\"Indicate whether the search looks at the absolute or relative value\"\n                >\n                  {isPercentage ? \"%\" : \"#\"}\n                </Button>\n              </InputAdornment>\n            ),\n          },\n        })}\n        inputProps={{ max: isPercentage ? 100 : 255, min: 0 }}\n      />\n    </div>\n  );\n}\n","import {\n  Button,\n  ButtonGroup,\n  InputAdornment,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { updateInput, updateOption } from \"Actions/replaceActions\";\nimport { colours, fullColours, operators } from \"constants.js\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: `${theme.spacing(1)}px`,\n  },\n}));\n\nconst mapOperatorToTitle = (operator, value, index) => {\n  let colour = fullColours[index];\n  var msg = \"\";\n  switch (operator) {\n    case \"=\":\n      msg = `Change the ${colour} value of the selected pixels to ${value}`;\n      break;\n    case \"+\":\n      msg = `Increase the ${colour} value of the selected pixels by ${value}`;\n      break;\n    case \"-\":\n      msg = `Decrease the ${colour} value of the selected pixels by ${value}`;\n      break;\n    case \"*\":\n      msg = `Multiply the ${colour} value of the selected pixels by ${value / 100 + 1}`;\n      break;\n    case \"/\":\n      msg = `Divide the ${colour} value of the selected pixels by ${value / 100 + 1}`;\n      break;\n    default:\n      return \"\";\n  }\n  return msg;\n};\n\nfunction Replace(props) {\n  const index = props.index;\n  const { root } = useStyles();\n  const operator = useSelector((state) => state.replace.oc[index]);\n  const value = useSelector((state) => state.replace.rc[index]);\n  const dispatch = useDispatch();\n\n  let isPercentageOp = operator === \"*\" || operator === \"/\" ? \"%\" : \"\";\n\n  return (\n    <div className={root}>\n      <ButtonGroup variant=\"contained\" size=\"small\">\n        {operators.map((option) => (\n          <Button\n            key={option}\n            onClick={() => dispatch(updateOption(index, option, true))}\n            title={mapOperatorToTitle(option, value, index)}\n            color={operator === option ? \"primary\" : \"default\"}\n          >\n            {option}\n          </Button>\n        ))}\n      </ButtonGroup>\n      <TextField\n        type=\"number\"\n        variant=\"outlined\"\n        size=\"small\"\n        value={value}\n        onChange={(e) => dispatch(updateInput(e, index))}\n        name={\"rc\" + colours[index]}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <Typography variant=\"button\">\n                {isPercentageOp ? \"%\" : \"#\"}\n              </Typography>\n            </InputAdornment>\n          ),\n        }}\n        inputProps={{ max: isPercentageOp ? 500 : 255, min: 0 }}\n      />\n    </div>\n  );\n}\n\nexport default Replace;\n","import React from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { colours } from \"constants.js\";\nimport { updateInput } from \"Actions/replaceActions\";\n\nconst useStyles = makeStyles({\n  root: {\n    margin: \"auto\",\n    width: \"150px\",\n  },\n});\n\nfunction Tolerance(props) {\n  const index = props.index;\n  const dispatch = useDispatch();\n  const comparison = useSelector((state) => state.replace.cc[index]);\n  const value = useSelector((state) => state.replace.tc[index]);\n  const { root } = useStyles();\n\n  return (\n    <TextField\n      type=\"number\"\n      variant=\"outlined\"\n      className={root}\n      disabled={comparison !== \"=\"}\n      value={value}\n      onChange={(e) => dispatch(updateInput(e, index))}\n      name={\"tc\" + colours[index]}\n      inputProps={{ max: 255, min: 0 }}\n    />\n  );\n}\n\nexport default Tolerance;\n","import React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport { colours } from \"constants.js\";\nimport { Find, Replace, Tolerance } from \"Components/Inputs\";\n\nfunction FrtValues() {\n  const frt = colours.map((colour, index) => (\n    <React.Fragment key={index}>\n      <Find\n        key={\"fc\" + colour}\n        index={index}\n        isAlpha={index === colours.length - 1}\n      />\n      <Replace key={\"rc\" + colour} index={index} />\n      <Tolerance key={\"tc\" + colour} index={index} />\n    </React.Fragment>\n  ));\n\n  return (\n    <>\n      <Box margin=\"auto\">\n        <Typography variant=\"body1\">Red:</Typography>\n      </Box>\n      {frt[0]}\n      <Box margin=\"auto\">\n        <Typography variant=\"body1\">Green:</Typography>\n      </Box>\n      {frt[1]}\n      <Box margin=\"auto\">\n        <Typography variant=\"body1\">Blue:</Typography>\n      </Box>\n      {frt[2]}\n      <Box margin=\"auto\">\n        <Typography variant=\"body1\">Alpha:</Typography>\n      </Box>\n      {frt[3]}\n    </>\n  );\n}\n\nexport default FrtValues;\n","import Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { basicImgEffect, section } from \"Actions/toolActions\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  replace_button_container: {\n    display: \"grid\",\n    gridTemplateColumns: \"auto auto\",\n    gridGap: theme.spacing(2),\n    gridColumn: \"1 / -1\",\n  },\n}));\n\nfunction ReplaceButtons() {\n  const { replace_button_container } = useStyles();\n\n  const dispatch = useDispatch();\n  const comparisons = useSelector((state) => state.replace.cc);\n  const oldVal = useSelector((state) => state.replace.fc);\n  const percentages = useSelector((state) => state.replace.fp);\n  const operators = useSelector((state) => state.replace.oc);\n  const rc = useSelector((state) => state.replace.rc);\n  const tolerance = useSelector((state) => state.replace.tc);\n\n  const newVal = rc.map((value, index) =>\n    operators[index] === \"*\" || operators[index] === \"/\"\n      ? value / 100 + 1\n      : value\n  );\n\n  return (\n    <div className={replace_button_container}>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() =>\n          dispatch(\n            basicImgEffect(\"REPLACE\", [\n              comparisons,\n              oldVal,\n              percentages,\n              operators,\n              newVal,\n              tolerance,\n            ])\n          )\n        }\n      >\n        Replace Colour\n      </Button>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() =>\n          dispatch(\n            section(\n              comparisons,\n              oldVal,\n              percentages,\n              operators,\n              newVal,\n              tolerance\n            )\n          )\n        }\n      >\n        Replace Section Colour\n      </Button>\n    </div>\n  );\n}\n\nexport default ReplaceButtons;\n","import React from \"react\";\nimport \"Styles/Tools.css\";\nimport FrtHeader from \"./FrtHeader\";\nimport FrtValues from \"./FrtValues\";\nimport ReplaceButtons from \"./ReplaceButtons\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  frtGrid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(4, auto)\",\n    gap: \"16px\",\n  },\n});\n\nfunction Tools() {\n  const { frtGrid } = useStyles();\n\n  return (\n    <div>\n      <div className={frtGrid}>\n        <div></div>\n        <FrtHeader />\n        <FrtValues />\n      </div>\n      <br />\n      <ReplaceButtons />\n      <br />\n    </div>\n  );\n}\n\nexport default Tools;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { basicImgEffect } from \"Actions/toolActions\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n\nconst MAX_VALUE = 500;\n\nconst useStyles = makeStyles(() => ({\n  input: {\n    width: \"10ch\",\n  },\n}));\n\nfunction Lighten(props) {\n  const { text, multiplier } = props;\n  const { input } = useStyles();\n\n  const dispatch = useDispatch();\n  const [value, setValue] = useState(0);\n\n  const handleChange = (e) => {\n    let val = e.target.value;\n    if (!isNaN(val) && val >= 0 && val <= MAX_VALUE) {\n      val = Number(Number(val).toFixed());\n      setValue(val);\n    }\n  };\n\n  const handleClick = () => {\n    dispatch(basicImgEffect(\"BRIGHT\", [multiplier(value)]));\n  };\n  return (\n    <>\n      <Button onClick={handleClick} color=\"secondary\" variant=\"contained\">\n        {text || \"Lighten\"}\n      </Button>\n\n      <TextField\n        type=\"number\"\n        variant=\"outlined\"\n        value={value}\n        onChange={handleChange}\n        className={input}\n        InputProps={{\n          endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n        }}\n        inputProps={{ max: MAX_VALUE, min: 0 }}\n      />\n    </>\n  );\n}\n\nexport default Lighten;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { basicImgEffect } from \"Actions/toolActions\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Lighten from \"./Lighten\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(8, auto)\",\n    gridGap: theme.spacing(2),\n    alignItems: \"center\",\n    maxWidth: \"40em\",\n    margin: \"auto\",\n  },\n}));\n\nfunction SimpleTools() {\n  const { root } = useStyles();\n\n  const dispatch = useDispatch();\n\n  return (\n    <div className={root}>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={() => dispatch(basicImgEffect(\"GRAYSCALE\"))}\n      >\n        Grayscale\n      </Button>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={() => dispatch(basicImgEffect(\"NEGATIVE\"))}\n      >\n        Negative\n      </Button>\n      <Lighten multiplier={(ratio) => ratio / 100 + 1} />\n      <Lighten multiplier={(ratio) => 100 / (ratio + 100)} text={\"Darken\"} />\n    </div>\n  );\n}\n\nexport default SimpleTools;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { updatePixel, switchSample, center } from \"Actions/toolActions\";\nimport { sampleColour } from \"Actions/replaceActions\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Transparent from \"Images/transparent.jpg\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundImage: `url(${Transparent})`,\n  },\n  box: {\n    width: \"400px\",\n    height: \"300px\",\n  },\n}));\n\nfunction Canvas({ canvasId }) {\n  const { root, box } = useStyles();\n\n  const dispatch = useDispatch();\n  const imgData = useSelector((state) => state.image.imgData);\n  const pixelSample = useSelector((state) => state.image.pixelSample);\n  const colourSample = useSelector((state) => state.image.colourSample);\n  const x1 = useSelector((state) => state.image.x1);\n  const y1 = useSelector((state) => state.image.y1);\n\n  // Center the image on canvas to the clicked point\n  const recenter = (event) => {\n    const canvas = event.target;\n    if (\n      imgData &&\n      (imgData.width > canvas.width || imgData.height > canvas.height)\n    ) {\n      dispatch(center(canvas, event.pageX, event.pageY));\n    }\n  };\n\n  const handleClick = (event) => {\n    if (imgData && (pixelSample || colourSample)) {\n      const canvas = event.target;\n      const [ratioX, ratioY] = [\n        canvas.width / canvas.scrollWidth,\n        canvas.height / canvas.scrollHeight,\n      ];\n      const point = [\n        Math.round((event.pageX - canvas.offsetLeft) * ratioX + x1),\n        Math.round((event.pageY - canvas.offsetTop) * ratioY + y1),\n      ];\n      if (\n        point[0] >= 0 &&\n        point[0] <= imgData.width &&\n        point[1] >= 0 &&\n        point[1] <= imgData.height\n      ) {\n        const r = imgData.data[point[1] * imgData.width * 4 + point[0] * 4];\n        const g = imgData.data[point[1] * imgData.width * 4 + point[0] * 4 + 1];\n        const b = imgData.data[point[1] * imgData.width * 4 + point[0] * 4 + 2];\n        const a = imgData.data[point[1] * imgData.width * 4 + point[0] * 4 + 3];\n        if (pixelSample) {\n          const pixel = [r, g, b, a, point[0], point[1]];\n          dispatch(updatePixel(pixel));\n        } else {\n          dispatch(sampleColour(r, g, b, a));\n        }\n      }\n    } else if (pixelSample) {\n      dispatch(switchSample(\"PIXEL\"));\n      alert(\n        \"You must upload an image first. Click the upload button to upload an image.\",\n      );\n    } else {\n      recenter(event);\n    }\n  };\n\n  return (\n    <Paper className={`${root} ${box}`} elevation={5}>\n      <canvas id={canvasId} className={box} onClick={handleClick}></canvas>\n    </Paper>\n  );\n}\n\nexport default Canvas;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { swap, zoom } from \"Actions/toolActions\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport KeyboardArrowRightIcon from \"@material-ui/icons/KeyboardBackspace\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    gap: `${theme.spacing(2)}px`,\n  },\n  flipped: {\n    transform: \"rotateY(180deg)\",\n  },\n}));\n\nfunction Download(props) {\n  const { root, flipped } = useStyles();\n\n  const dispatch = useDispatch();\n  const [anchor, setAnchor] = useState(null);\n\n  const handleClose = () => setAnchor(null);\n\n  const handleDownload = (type) => () => {\n    handleClose();\n    props.download(type);\n  };\n\n  return (\n    <div className={root}>\n      <IconButton\n        onClick={(e) => setAnchor(e.currentTarget)}\n        color=\"primary\"\n        title=\"Download Image\"\n        size=\"small\"\n      >\n        <SvgIcon\n          xmlns=\"http://www.w3.org/2000/svg\"\n          enableBackground=\"new 0 0 24 24\"\n          height=\"24px\"\n          viewBox=\"0 0 24 24\"\n          width=\"24px\"\n        >\n          <g>\n            <rect fill=\"none\" height=\"24\" width=\"24\" />\n          </g>\n          <g>\n            <path d=\"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z\" />\n          </g>\n        </SvgIcon>\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(swap(true))}\n        color=\"primary\"\n        title=\"Copy old preview to new\"\n        className={flipped}\n        size=\"small\"\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(zoom(false, true))}\n        color=\"primary\"\n        title=\"Zoom in\"\n        size=\"small\"\n      >\n        <AddIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(zoom(true, true))}\n        color=\"primary\"\n        title=\"Zoom out\"\n        size=\"small\"\n      >\n        <RemoveIcon />\n      </IconButton>\n\n      <Menu\n        anchorEl={anchor}\n        keepMounted\n        open={Boolean(anchor)}\n        onClose={handleClose}\n      >\n        <MenuItem onClick={handleDownload(\"png\")}>PNG</MenuItem>\n        <MenuItem onClick={handleDownload(\"jpeg\")}>JPG</MenuItem>\n        <MenuItem onClick={handleDownload(\"webp\")}>WebP</MenuItem>\n      </Menu>\n    </div>\n  );\n}\n\nexport default Download;\n","import React, { useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { swap, zoom } from \"Actions/toolActions\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport KeyboardBackspaceIcon from \"@material-ui/icons/KeyboardBackspace\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    gap: `${theme.spacing(2)}px`,\n  },\n}));\n\nfunction Upload(props) {\n  const dispatch = useDispatch();\n  const uploadRef = useRef();\n  const { root } = useStyles();\n\n  return (\n    <div className={root}>\n      <input ref={uploadRef} type=\"file\" onChange={props.change} hidden />\n\n      <IconButton\n        onClick={() => uploadRef.current.click()}\n        color=\"primary\"\n        title=\"Download Image\"\n        size=\"small\"\n      >\n        <SvgIcon\n          xmlns=\"http://www.w3.org/2000/svg\"\n          enableBackground=\"new 0 0 24 24\"\n          height=\"24px\"\n          viewBox=\"0 0 24 24\"\n          width=\"24px\"\n        >\n          <g>\n            <rect fill=\"none\" height=\"24\" width=\"24\" />\n          </g>\n          <g>\n            <path d=\"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M7,9l1.41,1.41L11,7.83V16h2V7.83l2.59,2.58L17,9l-5-5L7,9z\" />\n          </g>\n        </SvgIcon>\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(swap(false))}\n        color=\"primary\"\n        title=\"Copy new preview to old\"\n        size=\"small\"\n      >\n        <KeyboardBackspaceIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(zoom(false, false))}\n        color=\"primary\"\n        title=\"Zoom in\"\n        size=\"small\"\n      >\n        <AddIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={() => dispatch(zoom(true, false))}\n        color=\"primary\"\n        title=\"Zoom out\"\n        size=\"small\"\n      >\n        <RemoveIcon />\n      </IconButton>\n    </div>\n  );\n}\n\nexport default Upload;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  setImgData,\n  setFileName,\n  refresh,\n  center,\n  updatePixel,\n  basicImgEffect,\n  swap,\n  switchSample,\n} from \"Actions/toolActions\";\nimport { sampleColour } from \"Actions/replaceActions\";\nimport Tools, { SimpleTools } from \"Components/Tools\";\nimport \"./Styles/App.css\";\nimport Canvas from \"Components/Canvas\";\nimport { Download, Upload } from \"Components/PreviewButtons\";\n\nclass App extends Component {\n  // Fires when a new image is uploaded\n  imageChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      let img = new Image();\n      const reader = new FileReader();\n      reader.onload = (read) => {\n        img.onload = (imgEvent) => {\n          // Get image data\n          var canvas = document.createElement(\"canvas\");\n          let img = imgEvent.target;\n          let width = img.width;\n          let height = img.height;\n          canvas.width = width;\n          canvas.height = height;\n          canvas.getContext(\"2d\").drawImage(img, 0, 0, width, height);\n          let imgData = canvas\n            .getContext(\"2d\")\n            .getImageData(0, 0, width, height);\n\n          // Draw image onto canvases\n          canvas = document.getElementById(\"canvas\");\n          canvas.width = canvas.scrollWidth;\n          canvas.height = canvas.scrollHeight;\n          const ctx = canvas.getContext(\"2d\");\n          canvas = document.getElementById(\"newCanvas\");\n          canvas.width = canvas.scrollWidth;\n          canvas.height = canvas.scrollHeight;\n          this.props.setImgData(false, imgData).then(() => {\n            ctx.putImageData(\n              this.props.imgData,\n              0,\n              0,\n              0,\n              0,\n              canvas.scrollWidth,\n              canvas.scrollHeight,\n            );\n            // copy image data into other canvas\n            this.props.swap(true);\n          });\n\n          // refresh state\n          this.props.refresh();\n        };\n\n        let filedata = read.target.result;\n        if (filedata.startsWith(\"data:image\")) {\n          img.src = filedata;\n          this.props.setFileName(\n            file.name.substring(0, file.name.lastIndexOf(\".\")),\n          );\n        } else {\n          alert(\"That file type is not supported\");\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n    // Prevent file name from appearing\n    //let name = event.target.value.substr(event.target.value.lastIndexOf(\"\\\\\") + 1);\n    event.target.value = \"\";\n  };\n\n  // Download new image\n  download = (type) => {\n    if (this.props.imgData) {\n      const link = document.createElement(\"a\");\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = this.props.imgData.width;\n      canvas.height = this.props.imgData.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.putImageData(this.props.newData, 0, 0);\n      link.setAttribute(\"href\", canvas.toDataURL(`image/${type}`));\n      link.setAttribute(\"download\", `${this.props.fileName}-converted`);\n      link.click();\n      link.remove();\n      canvas.remove();\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"container\" id={\"container\"}>\n        <div className=\"grid\">\n          <label>Old Preview</label>\n          <label>New Preview</label>\n\n          <Canvas canvasId=\"canvas\" />\n          <Canvas canvasId=\"newCanvas\" />\n\n          <Upload change={this.imageChange} />\n          <Download download={this.download} />\n        </div>\n\n        <Tools />\n        <SimpleTools />\n      </div>\n    );\n  }\n\n  // No need to rerender since the canvas rerenders on its own\n  shouldComponentUpdate() {\n    return false;\n  }\n}\n\nexport default connect((state) => ({ ...state.image }), {\n  setImgData,\n  setFileName,\n  refresh,\n  center,\n  updatePixel,\n  basicImgEffect,\n  swap,\n  switchSample,\n  sampleColour,\n})(App);\n","import { createMuiTheme } from \"@material-ui/core\";\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#6200ea\",\n      light: \"#000\",\n    },\n    secondary: {\n      main: \"#ffffff\",\n    },\n  },\n\n  typography: {\n    fontFamily: \"Quicksand\",\n  },\n\n  props: {\n    MuiTextField: {\n      size: \"small\",\n    },\n  },\n\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: \"initial\",\n      },\n    },\n\n    MuiOutlinedInput: {\n      inputMarginDense: {\n        paddingTop: \"8px\",\n        paddingBottom: \"8px\",\n      },\n    },\n  },\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { SnackbarProvider } from \"notistack\";\nimport { MuiThemeProvider } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport rootReducer from \"Reducers/rootReducer\";\nimport App from \"./App\";\nimport { theme } from \"theme\";\n\nexport const store = createStore(rootReducer, {}, applyMiddleware(thunk));\n\nconst useNotistackStyles = makeStyles(() => ({\n  contentRoot: {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n}));\n\nconst NotistackProvider = ({ children }) => {\n  const classes = useNotistackStyles();\n  return (\n    <SnackbarProvider classes={classes} children={children} maxSnack={3} />\n  );\n};\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={theme}>\n      <NotistackProvider>\n        <App />\n      </NotistackProvider>\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n/** @TODO Layout change\n *\n * Find [Icon Actions]\n * Hex Input with color picker adornment, Toggle for input types [normal input, slider, etc]\n * Red: [Comparision ops toggles] [input] [value type toggle] [optional input if range comparison selected], ...\n *\n * Replace [Icon Actions (none currently)]\n * Similar to above\n */ ","module.exports = __webpack_public_path__ + \"static/media/transparent.008f28b8.jpg\";"],"sourceRoot":""}