(window.webpackJsonpimage=window.webpackJsonpimage||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),c=a.n(i),o=a(2),l=a(12),u=a(19),s=a(20),h=a(4),p=a(6);function m(e,t,a){for(var n=!0,r=0;r<4;r++)n=n&&Math.abs(e[r]-t[r])<=a[r];return n}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={imgData:null,newData:null,x1:0,x2:0,y1:0,y2:0,sample:!1,pixel:null,zoom1:0,zoom2:0},v={GRAYSCALE:function(e){for(var t=0,a=0;a<e.length;a+=4)t=Math.round((e[a]+e[a+1]+e[a+2])/3),e[a]=t,e[a+1]=t,e[a+2]=t},NEGATIVE:function(e){for(var t=0;t<e.length;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2]},BRIGHT:function(e,t){for(var a=0;a<e.length;a+=4)e[a]=e[a]*t>255?255:e[a]*t,e[a+1]=e[a+1]*t>255?255:e[a+1]*t,e[a+2]=e[a+2]*t>255?255:e[a+2]*t},REPLACE:function(e,t,a,n){for(var r=0;r<e.length;r+=4)if(m([e[r],e[r+1],e[r+2],e[r+3]],t,n))for(var i=0;i<4;i++)e[r+i]=a[i]}},b=50,E=1.5;function w(e,t,a,n){return a<t.width||e[0]<0?e[0]=0:e[0]=e[0]>a-t.width?a-t.width:e[0],n<t.height||e[1]<0?e[1]=0:e[1]=e[1]>n-t.height?n-t.height:e[1],e}function y(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"newCanvas",r=document.getElementById(n);r.getContext("2d").putImageData(a,-e,-t,e,t,r.width,r.height)}function C(e,t){e.forEach((function(e,a){return t[a]=e}))}function O(e){document.getElementById("container").className=e?"container":"container cross"}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return t.isNewCanvas?g({},e,{newData:t.data}):g({},e,{imgData:t.data});case"REFRESH":return g({},e,{x1:0,x2:0,y1:0,y2:0,sample:!1,pixel:null,zoom1:0,zoom2:0});case"CENTER":var a=t.canvas,n="canvas"===a.id?[e.x1,e.y1,e.imgData]:[e.x2,e.y2,e.newData],r=Object(h.a)(n,3),i=r[0],c=r[1],o=r[2],l=function(e,t,a,n,r,i,c){var o=e.width/2,l=e.height/2,u=e.width/e.scrollWidth,s=e.height/e.scrollHeight;return w([Math.round(t+(i-e.offsetLeft)*u-o),Math.round(a+(c-e.offsetTop)*s-l)],e,n,r)}(t.canvas,i,c,o.width,o.height,t.pageX,t.pageY);if(l[0]!==i||l[1]!==c){var u,p,d,D,j=a.getContext("2d");"newCanvas"===a.id?(u=l,p=Object(h.a)(u,2),e.x2=p[0],e.y2=p[1]):(d=l,D=Object(h.a)(d,2),e.x1=D[0],e.y1=D[1]);var x=[o.width,o.height],k=x[0],I=x[1],N=k-l[0],P=I-l[1];N=Math.min(a.width,N),P=Math.min(a.height,P);for(var S=new Uint8ClampedArray(N*P*4),T=0;T<P;T++)for(var A=0;A<N;A++)for(var R=0;R<4;R++)S[T*N*4+4*A+R]=o.data[(l[1]+T)*k*4+4*(l[0]+A)+R];o=new ImageData(S,N,P),j.putImageData(o,0,0)}return e;case"PIXEL":return O(e.sample),g({},e,{sample:!1,pixel:t.pixel});case"SAMPLE":return O(e.sample),g({},e,{sample:!e.sample});case"BASIC":if(e.newData){var B=v[t.effect];C(e.imgData.data,e.newData.data),t.payload?B.apply(void 0,[e.newData.data].concat(Object(s.a)(t.payload))):B(e.newData.data),y(e.x2,e.y2,e.newData)}return e;case"SECTION":if(e.pixel&&e.newData){var M=function(e,t,a){var n=[e.width,e.height,e.data],r=n[0],i=n[1],c=n[2],o=[[0,-1],[1,0],[0,1],[-1,0]],l=new Array(r*i),u=[],s=[t[0],t[1],t[2],t[3]],p=[t[4],t[5]],d=p[0],g=p[1],f=[[d,g]];for(l[g*r+d]=!0;0!==f.length;){var v=f.pop(),b=Object(h.a)(v,2);if(d=b[0],g=b[1],!(d<0||d>r||g<0||g>i)){for(var E=[],w=0;w<4;w++)E.push(c[g*r*4+4*d+w]);m(E,s,a)&&(u.push(g*r*4+4*d),o.forEach((function(e){l[(g+e[1])*r+d+e[0]]||(l[(g+e[1])*r+d+e[0]]=!0,f.push([d+e[0],g+e[1]]))})))}}return u}(e.imgData,e.pixel,t.tolerance),L=e.newData.data;C(e.imgData.data,e.newData.data);var Z=t.newVal;M.forEach((function(e){L[e]=Z[0],L[e+1]=Z[1],L[e+2]=Z[2],L[e+3]=Z[3]})),y(e.x2,e.y2,e.newData)}return e;case"SWAP":if(e.imgData){var G=t.copyToNew?["newCanvas",e.imgData,e.x2,e.y2]:["canvas",e.newData,e.x1,e.y1],H=Object(h.a)(G,4),W=H[0],z=H[1],F=H[2],Y=H[3],U=document.getElementById(W);U.getContext("2d").putImageData(z,-F,-Y,F,Y,U.width,U.height);var X=new Uint8ClampedArray(z.data),V=new ImageData(X,z.width,z.height);return t.copyToNew?g({},e,{newData:V}):g({},e,{imgData:V})}return e;case"ZOOM":if(e.imgData){var J=t.isNewCanvas?["newCanvas",e.newData,e.zoom2,e.x2,e.y2]:["canvas",e.imgData,e.zoom1,e.x1,e.y1],K=Object(h.a)(J,5),q=K[0],Q=K[1],$=K[2],_=K[3],ee=K[4],te=document.getElementById(q);if(!t.isZoomOut||$<0||Q.width>te.scrollWidth||Q.height>te.scrollHeight){var ae=t.isZoomOut?$+1:$-1,ne=Math.pow(E,ae),re=Math.round(te.scrollWidth*ne);if((t.isZoomOut&&$>=0||!t.isZoomOut&&$<=0)&&(!t.isZoomOut&&re<b?re=b:t.isZoomOut&&re>=Q.width&&re>=Q.height&&(re=Math.max(Q.width,Q.height))),re!==te.width){te.width=te.height=re;var ie=w([_,ee],te,Q.width,Q.height),ce=Object(h.a)(ie,2);_=ce[0],ee=ce[1],e=t.isNewCanvas?g({},e,{x2:_,y2:ee,zoom2:ae}):g({},e,{x1:_,y1:ee,zoom1:ae}),y(_,ee,Q,q)}}}return e;default:return e}},j=a(7),x=a(8),k=a(11),I=a(9),N=a(1),P=a(10),S=function(){return{type:"SAMPLE"}},T=function(e,t){return{type:"BASIC",effect:e,payload:t}},A=function(e){return{type:"SWAP",copyToNew:e}},R=function(e,t){return{type:"ZOOM",isZoomOut:e,isNewCanvas:t}},B=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(k.a)(this,Object(I.a)(t).call(this))).state={fcr:255,fcg:255,fcb:255,fca:255,rcr:255,rcg:255,rcb:255,rca:255,tcr:10,tcg:10,tcb:10,tca:10},e.onChange=e.onChange.bind(Object(N.a)(e)),e.replace=e.replace.bind(Object(N.a)(e)),e.section=e.section.bind(Object(N.a)(e)),e.click=e.click.bind(Object(N.a)(e)),e.navigate=e.navigate.bind(Object(N.a)(e)),e}return Object(P.a)(t,e),Object(x.a)(t,[{key:"onChange",value:function(e){var t=Number(e.target.value);if(!isNaN(t)&&t>=0&&t<=255){t=Number(t.toFixed());var a=Object(p.a)({},e.target.name,t);this.setState(a)}}},{key:"replace",value:function(e){e.preventDefault();var t=this.state,a=[t.fcr,t.fcg,t.fcb,t.fca],n=[t.rcr,t.rcg,t.rcb,t.rca],r=[t.tcr,t.tcg,t.tcb,t.tca];this.props.basicImgEffect("REPLACE",[a,n,r])}},{key:"click",value:function(e){e.preventDefault(),this.props.switchSample()}},{key:"section",value:function(e){e.preventDefault();var t=this.props.pixel,a=this.state;if(t&&t[0]===a.fcr&&t[1]===a.fcg&&t[2]===a.fcb&&t[3]===a.fca){var n=[a.rcr,a.rcg,a.rcb,a.rca],r=[a.tcr,a.tcg,a.tcb,a.tca];this.props.section(n,r)}else alert("You must first specify a section to paint. Click the cursor icon and then click on an area of the canvas.")}},{key:"navigate",value:function(e){var t=e.which;if(t>=37&&t<=40){var a=e.target.parentElement;if("replaceGrid"!==a.id)return;var n=e.target.name,r=n[0],i=n[2],c="f"===r?1:"r"===r?2:3;c+="r"===i?0:"g"===i?3:"b"===i?6:9,37===t?c-=0===e.target.selectionStart?1:c:38===t?c-=3:c+=39===t?e.target.selectionStart===e.target.value.length?1:12:3,c>=1&&c<=12&&a[c].focus()}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{id:"replaceGrid",className:"replaceGrid",onKeyDown:this.navigate},r.a.createElement("label",null),r.a.createElement("span",null,r.a.createElement("label",null,"Find"),r.a.createElement("button",{onClick:this.click,title:"Click section on canvas",className:"infoTool"},r.a.createElement("i",{id:"clickIcon"},"\xa0\xa0\xa0\xa0"))),r.a.createElement("label",null,"Replace"),r.a.createElement("label",null,"Tolerance"),r.a.createElement("label",null,"Red:"),r.a.createElement("input",{type:"text",value:this.state.fcr,onChange:function(t){return e.onChange(t)},name:"fcr"}),r.a.createElement("input",{type:"text",value:this.state.rcr,onChange:function(t){return e.onChange(t)},name:"rcr"}),r.a.createElement("input",{type:"text",value:this.state.tcr,onChange:function(t){return e.onChange(t)},name:"tcr"}),r.a.createElement("label",null,"Green:"),r.a.createElement("input",{type:"text",value:this.state.fcg,onChange:function(t){return e.onChange(t)},name:"fcg"}),r.a.createElement("input",{type:"text",value:this.state.rcg,onChange:function(t){return e.onChange(t)},name:"rcg"}),r.a.createElement("input",{type:"text",value:this.state.tcg,onChange:function(t){return e.onChange(t)},name:"tcg"}),r.a.createElement("label",null,"Blue:"),r.a.createElement("input",{type:"text",value:this.state.fcb,onChange:function(t){return e.onChange(t)},name:"fcb"}),r.a.createElement("input",{type:"text",value:this.state.rcb,onChange:function(t){return e.onChange(t)},name:"rcb"}),r.a.createElement("input",{type:"text",value:this.state.tcb,onChange:function(t){return e.onChange(t)},name:"tcb"}),r.a.createElement("label",null,"Alpha:"),r.a.createElement("input",{type:"text",value:this.state.fca,onChange:function(t){return e.onChange(t)},name:"fca"}),r.a.createElement("input",{type:"text",value:this.state.rca,onChange:function(t){return e.onChange(t)},name:"rca"}),r.a.createElement("input",{type:"text",value:this.state.tca,onChange:function(t){return e.onChange(t)},name:"tca"}),r.a.createElement("div",{id:"replaceBtns"},r.a.createElement("button",{onClick:this.replace},"Replace Colour"),r.a.createElement("button",{onClick:this.section},"Replace Section Colour")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.pixel){var a=e.pixel;return t.pixel&&t.pixel[4]===a[4]&&t.pixel[5]===a[5]?null:{fcr:a[0],fcg:a[1],fcb:a[2],fca:a[3],pixel:a}}return null}}]),t}(n.Component),M=Object(o.b)((function(e){return{pixel:e.pixel}}),{switchSample:S,basicImgEffect:T,section:function(e,t){return{type:"SECTION",newVal:e,tolerance:t}}})(B);a(31);var L=function(){return r.a.createElement("div",null,r.a.createElement(M,null))},Z=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(k.a)(this,Object(I.a)(t).call(this))).state={val:0},e.handleChange=e.handleChange.bind(Object(N.a)(e)),e.handleClick=e.handleClick.bind(Object(N.a)(e)),e}return Object(P.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;!isNaN(t)&&t>=0&&t<=500&&(t=Number(Number(t).toFixed()),this.setState({val:t}))}},{key:"handleClick",value:function(){this.props.basicImgEffect("BRIGHT",[this.props.multiplier(this.state.val)])}},{key:"render",value:function(){var e=this.props.text||"Lighten";return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleClick}," ",e),r.a.createElement("input",{type:"text",value:this.state.val,onChange:this.handleChange,style:{width:"25px"}}),r.a.createElement("label",null,"%"))}}]),t}(n.Component),G=Object(o.b)((function(){return{}}),{basicImgEffect:T})(Z);var H=function(){var e=Object(o.c)();return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",justifyItems:"center"}},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e(T("GRAYSCALE"))}}," Grayscale "),r.a.createElement("button",{onClick:function(){return e(T("NEGATIVE"))}}," Negative "),r.a.createElement(G,{multiplier:function(e){return e/100+1}}),r.a.createElement(G,{multiplier:function(e){return 100/(e+100)},text:"Darken"})))};a(32);var W=function(e){var t=Object(o.c)();return r.a.createElement("div",null,r.a.createElement("input",{id:"upload",type:"file",onChange:e.change,hidden:!0}),r.a.createElement("button",{className:"fileBtn",onClick:function(){return document.getElementById("upload").click()}},r.a.createElement("i",{id:"uploadIcon",title:"Upload Image"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{onClick:function(){return t(A(!1))}},r.a.createElement("i",{id:"leftIcon",title:"Copy new preview to old"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(R(!1,!1))}},r.a.createElement("i",{id:"plusIcon",title:"Zoom in"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(R(!0,!1))}},r.a.createElement("i",{id:"minusIcon",title:"Zoom out"},"\xa0\xa0\xa0\xa0")))};var z=function(e){var t=Object(o.c)();return r.a.createElement("div",null,r.a.createElement("button",{className:"fileBtn",onClick:e.download},r.a.createElement("i",{id:"downloadIcon",title:"Download Image"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{onClick:function(){return t(A(!0))}},r.a.createElement("i",{id:"rightIcon",title:"Copy old preview to new"},"\xa0\xa0\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(R(!1,!0))}},r.a.createElement("i",{id:"plusIcon",title:"Zoom in"},"\xa0\xa0\xa0\xa0")),r.a.createElement("button",{className:"infoTool",onClick:function(){return t(R(!0,!0))}},r.a.createElement("i",{id:"minusIcon",title:"Zoom out"},"\xa0\xa0\xa0\xa0")),r.a.createElement("a",{id:"download",href:"/",style:{display:"none"},download:"converted"},"Download"))};function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Y=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(k.a)(this,Object(I.a)(t).call(this))).imageChange=e.imageChange.bind(Object(N.a)(e)),e.download=e.download.bind(Object(N.a)(e)),e.recenter=e.recenter.bind(Object(N.a)(e)),e.handleClick=e.handleClick.bind(Object(N.a)(e)),e}return Object(P.a)(t,e),Object(x.a)(t,[{key:"imageChange",value:function(e){var t=this,a=e.target.files[0];if(a){var n=new Image,r=new FileReader;r.onload=function(e){n.onload=function(e){var a=document.createElement("canvas"),n=e.target,r=n.width,i=n.height;a.width=r,a.height=i,a.getContext("2d").drawImage(n,0,0,r,i);var c=a.getContext("2d").getImageData(0,0,r,i);(a=document.getElementById("canvas")).width=a.scrollWidth,a.height=a.scrollHeight;var o=a.getContext("2d");(a=document.getElementById("newCanvas")).width=a.scrollWidth,a.height=a.scrollHeight,t.props.setImgData(!1,c).then((function(){o.putImageData(t.props.imgData,0,0,0,0,a.scrollWidth,a.scrollHeight),t.props.swap(!0)})),t.props.refresh()};var a=e.target.result;a.startsWith("data:image")?n.src=a:alert("That file type is not supported")},r.readAsDataURL(a)}e.target.value=""}},{key:"download",value:function(){var e=document.getElementById("download");if(this.props.imgData){var t=document.createElement("canvas");t.width=this.props.imgData.width,t.height=this.props.imgData.height,t.getContext("2d").putImageData(this.props.newData,0,0),e.setAttribute("href",t.toDataURL()),e.click()}}},{key:"recenter",value:function(e){var t=e.target;this.props.imgData&&(this.props.imgData.width>t.width||this.props.imgData.height>t.height)&&this.props.center(t,e.pageX,e.pageY)}},{key:"handleClick",value:function(e){if(this.props.imgData&&this.props.sample&&"canvas"===e.target.id){var t=e.target,a=t.width/t.scrollWidth,n=t.height/t.scrollHeight,r=[Math.round((e.pageX-t.offsetLeft)*a+this.props.x1),Math.round((e.pageY-t.offsetTop)*n+this.props.y1)];if(r[0]>=0&&r[0]<=this.props.imgData.width&&r[1]>=0&&r[1]<=this.props.imgData.height){var i=[this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]],this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+1],this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+2],this.props.imgData.data[r[1]*this.props.imgData.width*4+4*r[0]+3],r[0],r[1]];this.props.updatePixel(i)}}else this.props.sample?this.props.switchSample():this.recenter(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container",id:"container"},r.a.createElement("div",{className:"grid"},r.a.createElement("label",null,"Old Preview"),r.a.createElement("label",null,"New Preview"),r.a.createElement("div",{className:"transparent"},r.a.createElement("canvas",{id:"canvas",onClick:this.handleClick})),r.a.createElement("div",{className:"transparent"},r.a.createElement("canvas",{id:"newCanvas",onClick:this.handleClick})),r.a.createElement(W,{change:this.imageChange}),r.a.createElement(z,{download:this.download})),r.a.createElement(L,null),r.a.createElement(H,null))}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(n.Component),U=Object(o.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}),{setImgData:function(e,t){return function(a){return a({type:"SET",isNewCanvas:e,data:t}),Promise.resolve()}},refresh:function(){return{type:"REFRESH"}},center:function(e,t,a){return{type:"CENTER",canvas:e,pageX:t,pageY:a}},updatePixel:function(e){return{type:"PIXEL",pixel:e}},basicImgEffect:T,swap:A,switchSample:S})(Y),X=Object(l.c)(D,f,Object(l.a)(u.a));c.a.render(r.a.createElement(o.a,{store:X},r.a.createElement(U,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.63dadb5f.chunk.js.map