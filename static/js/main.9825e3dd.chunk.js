(window.webpackJsonpimage=window.webpackJsonpimage||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(10),r=a.n(l),c=a(8),s=a(2),o=a(3),u=a(6),h=a(4),m=a(1),g=a(5),d=(a(16),a(7)),p={display:"block",margin:"10px auto"},f=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={fcr:255,fcg:255,fcb:255,fca:255,rcr:255,rcg:255,rcb:255,rca:255,tcr:10,tcg:10,tcb:10,tca:10},e.onChange=e.onChange.bind(Object(m.a)(e)),e}return Object(g.a)(t,e),Object(o.a)(t,[{key:"onChange",value:function(e){var t=Number(e.target.value);if(!isNaN(t)&&t>=0&&t<=255){var a=Object(d.a)({},e.target.name,t);this.setState(a)}}},{key:"render",value:function(){var e=this;return i.a.createElement("form",{onSubmit:function(t){return e.props.submit(e.state,t)},className:"replaceGrid"},i.a.createElement("label",null),i.a.createElement("label",null,"Find"),i.a.createElement("label",null,"Replace"),i.a.createElement("label",null,"Tolerance"),i.a.createElement("label",null,"Red:"),i.a.createElement("input",{type:"text",value:this.state.fcr,onChange:function(t){return e.onChange(t)},name:"fcr"}),i.a.createElement("input",{type:"text",value:this.state.rcr,onChange:function(t){return e.onChange(t)},name:"rcr"}),i.a.createElement("input",{type:"text",value:this.state.tcr,onChange:function(t){return e.onChange(t)},name:"tcr"}),i.a.createElement("label",null,"Green:"),i.a.createElement("input",{type:"text",value:this.state.fcg,onChange:function(t){return e.onChange(t)},name:"fcg"}),i.a.createElement("input",{type:"text",value:this.state.rcg,onChange:function(t){return e.onChange(t)},name:"rcg"}),i.a.createElement("input",{type:"text",value:this.state.tcg,onChange:function(t){return e.onChange(t)},name:"tcg"}),i.a.createElement("label",null,"Blue:"),i.a.createElement("input",{type:"text",value:this.state.fcb,onChange:function(t){return e.onChange(t)},name:"fcb"}),i.a.createElement("input",{type:"text",value:this.state.rcb,onChange:function(t){return e.onChange(t)},name:"rcb"}),i.a.createElement("input",{type:"text",value:this.state.tcb,onChange:function(t){return e.onChange(t)},name:"tcb"}),i.a.createElement("label",null,"Alpha:"),i.a.createElement("input",{type:"text",value:this.state.fca,onChange:function(t){return e.onChange(t)},name:"fca"}),i.a.createElement("input",{type:"text",value:this.state.rca,onChange:function(t){return e.onChange(t)},name:"rca"}),i.a.createElement("input",{type:"text",value:this.state.tca,onChange:function(t){return e.onChange(t)},name:"tca"}),i.a.createElement("button",{id:"replaceBtn",style:p,type:"submit"},"Replace Colour"))}}]),t}(n.Component),b=(a(17),{display:"block",margin:"10px auto"}),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={rcr:255,rcg:255,rcb:255,rca:255,tcr:10,tcg:10,tcb:10,tca:10},e.onChange=e.onChange.bind(Object(m.a)(e)),e}return Object(g.a)(t,e),Object(o.a)(t,[{key:"onChange",value:function(e){var t=Number(e.target.value);if(!isNaN(t)&&t>=0&&t<=255){var a=Object(d.a)({},e.target.name,t);this.setState(a)}}},{key:"render",value:function(){var e=this,t=this.props.pixel?this.props.pixel:[0,0,0,0,0,0];return i.a.createElement("form",{onSubmit:function(t){return e.props.submit(t,e.state)},className:"sectionGrid"},i.a.createElement("label",null),i.a.createElement("span",null,i.a.createElement("label",null,"Find"),i.a.createElement("i",{id:"clickIcon",onClick:this.props.click,title:"Click section on canvas"},"\xa0\xa0\xa0\xa0")),i.a.createElement("label",null,"Replace"),i.a.createElement("label",null,"Tolerance"),i.a.createElement("label",null,"Red:"),i.a.createElement("label",null,t[0]),i.a.createElement("input",{type:"text",value:this.state.rcr,onChange:function(t){return e.onChange(t)},name:"rcr"}),i.a.createElement("input",{type:"text",value:this.state.tcr,onChange:function(t){return e.onChange(t)},name:"tcr"}),i.a.createElement("label",null,"Green:"),i.a.createElement("label",null,t[1]),i.a.createElement("input",{type:"text",value:this.state.rcg,onChange:function(t){return e.onChange(t)},name:"rcg"}),i.a.createElement("input",{type:"text",value:this.state.tcg,onChange:function(t){return e.onChange(t)},name:"tcg"}),i.a.createElement("label",null,"Blue:"),i.a.createElement("label",null,t[2]),i.a.createElement("input",{type:"text",value:this.state.rcb,onChange:function(t){return e.onChange(t)},name:"rcb"}),i.a.createElement("input",{type:"text",value:this.state.tcb,onChange:function(t){return e.onChange(t)},name:"tcb"}),i.a.createElement("label",null,"Alpha:"),i.a.createElement("label",null,t[3]),i.a.createElement("input",{type:"text",value:this.state.rca,onChange:function(t){return e.onChange(t)},name:"rca"}),i.a.createElement("input",{type:"text",value:this.state.tca,onChange:function(t){return e.onChange(t)},name:"tca"}),i.a.createElement("label",null,"X:"),i.a.createElement("label",null,t[4]),i.a.createElement("label",{id:"sectionBlank"}),i.a.createElement("label",null,"Y:"),i.a.createElement("label",null,t[5]),i.a.createElement("button",{id:"sectionBtn",style:b,type:"submit"},"Replace Section Colour"))}}]),t}(n.Component);var C=function(e){return i.a.createElement("div",null,i.a.createElement(f,{submit:function(t,a){return function(e,t,a,n){n.preventDefault(),e(t,[a.fcr,a.fcg,a.fcb,a.fca],[a.rcr,a.rcg,a.rcb,a.rca],[a.tcr,a.tcg,a.tcb,a.tca])}(e.replace,e.file,t,a)}}),i.a.createElement(v,{click:e.click,pixel:e.pixel,submit:e.submit}))};function E(e,t,a){for(var n=!0,i=0;i<4;i++)n=n&&Math.abs(e[i]-t[i])<=a[i];return n}var w=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={imgData:null,newData:null,x1:0,x2:0,y1:0,y2:0,sample:!1,pixel:null},e.imageChange=e.imageChange.bind(Object(m.a)(e)),e.download=e.download.bind(Object(m.a)(e)),e.loadImage=e.loadImage.bind(Object(m.a)(e)),e.swapImage=e.swapImage.bind(Object(m.a)(e)),e.replace=e.replace.bind(Object(m.a)(e)),e.recentre=e.recentre.bind(Object(m.a)(e)),e.handleClick=e.handleClick.bind(Object(m.a)(e)),e.replaceSection=e.replaceSection.bind(Object(m.a)(e)),e}return Object(g.a)(t,e),Object(o.a)(t,[{key:"imageChange",value:function(e){var t=this,a=e.target.files[0];if(a){var n=new Image,i=new FileReader;i.onload=function(e){n.onload=function(e){var a=document.createElement("canvas"),n=e.target,i=n.width,l=n.height;a.width=i,a.height=l,a.getContext("2d").drawImage(n,0,0,i,l);var r=a.getContext("2d").getImageData(0,0,i,l);t.setState({imgData:r},t.loadImage)};var a=e.target.result;a.startsWith("data:image")?n.src=a:alert("That file type is not supported")},i.readAsDataURL(a)}e.target.value=""}},{key:"loadImage",value:function(){var e=document.getElementById("canvas");e.width=e.scrollWidth,e.height=e.scrollHeight;var t=e.getContext("2d");(e=document.getElementById("newCanvas")).width=e.scrollWidth,e.height=e.scrollHeight,t.putImageData(this.state.imgData,0,0),this.swapImage(!1)}},{key:"swapImage",value:function(e){if(this.state.imgData){var t=e?["canvas",this.state.newData]:["newCanvas",this.state.imgData],a=Object(c.a)(t,2),n=a[0],i=a[1];document.getElementById(n).getContext("2d").putImageData(i,0,0);var l=new Uint8ClampedArray(i.data),r=new ImageData(l,i.width,i.height);e?this.setState({imgData:r,x1:0,y1:0}):this.setState({newData:r,x2:0,y2:0})}}},{key:"replace",value:function(e,t,a,n){e&&(!function(e,t,a,n,i){for(var l=e.data,r=t.data,c=0;c<l.length;c+=4)if(E([l[c],l[c+1],l[c+2],l[c+3]],a,i))for(var s=0;s<4;s++)r[c+s]=n[s];else for(var o=0;o<4;o++)r[c+o]=l[c+o]}(this.state.imgData,e,t,a,n),document.getElementById("newCanvas").getContext("2d").putImageData(e,0,0))}},{key:"download",value:function(){var e=document.getElementById("download");if(this.state.imgData){var t=document.createElement("canvas");t.width=this.state.imgData.width,t.height=this.state.imgData.height,t.getContext("2d").putImageData(this.state.newData,0,0),e.setAttribute("href",t.toDataURL()),e.click()}}},{key:"recentre",value:function(e){var t=e.target;if(this.state.imgData&&(this.state.imgData.width>t.width||this.state.imgData.height>t.height)){var a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);var n="canvas"===t.id?this.state.x1:this.state.x2,i="canvas"===t.id?this.state.y1:this.state.y2,l="canvas"===t.id?this.state.imgData:this.state.newData,r=t.width/2,c=[n+e.pageX-t.offsetLeft-r,i+e.pageY-t.offsetTop-r];c[0]=c[0]<0?0:c[0],c[0]=c[0]>l.width-t.width?l.width-t.width:c[0],c[0]=l.width<t.width?0:c[0],c[1]=c[1]<0?0:c[1],c[1]=c[1]>l.height-t.height?l.height-t.height:c[1],c[1]=l.width<t.width?0:c[1],"canvas"===t.id?this.setState({x1:c[0],y1:c[1]}):this.setState({x2:c[0],y2:c[1]});for(var s=[l.width,l.height],o=s[0],u=s[1],h=o-c[0],m=u-c[1],g=new Uint8ClampedArray(h*m*4),d=0;d<m;d++)for(var p=0;p<h;p++)for(var f=0;f<4;f++)g[d*h*4+4*p+f]=l.data[(c[1]+d)*o*4+4*(c[0]+p)+f];l=new ImageData(g,h,m),a.putImageData(l,0,0)}}},{key:"handleClick",value:function(e){if(this.state.imgData&&this.state.sample&&"canvas"===e.target.id){var t=e.target,a=[e.pageX-t.offsetLeft+this.state.x1,e.pageY-t.offsetTop+this.state.y1];if(a[0]>=0&&a[0]<=this.state.imgData.width&&a[1]>=0&&a[1]<=this.state.imgData.height){var n=[this.state.imgData.data[a[1]*this.state.imgData.width*4+4*a[0]],this.state.imgData.data[a[1]*this.state.imgData.width*4+4*a[0]+1],this.state.imgData.data[a[1]*this.state.imgData.width*4+4*a[0]+2],this.state.imgData.data[a[1]*this.state.imgData.width*4+4*a[0]+3],a[0],a[1]];this.setState({sample:!1,pixel:n})}}else this.recentre(e)}},{key:"replaceSection",value:function(e,t){if(e.preventDefault(),this.state.pixel){var a=[t.rcr,t.rcg,t.rcb,t.rca],n=[t.tcr,t.tcg,t.tcb,t.tca],i=function(e,t,a){for(var n=[e.width,e.height,e.data],i=n[0],l=n[1],r=n[2],s=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],o=new Array(i*l),u=[],h=[t[0],t[1],t[2],t[3]],m=[t[4],t[5]],g=m[0],d=m[1],p=[[g,d]];0!==p.length;){var f=p.pop(),b=Object(c.a)(f,2);if(g=b[0],d=b[1],!(g<0||g>i||d<0||d>l)){o[d*i+g]=!0;for(var v=[],C=0;C<4;C++)v.push(r[d*i*4+4*g+C]);E(v,h,a)&&(u.push(d*i*4+4*g),s.forEach((function(e){o[(d+e[1])*i+g+e[0]]||p.push([g+e[0],d+e[1]])})))}}return u}(this.state.imgData,this.state.pixel,n),l=this.state.newData.data;i.forEach((function(e){l[e]=a[0],l[e+1]=a[1],l[e+2]=a[2],l[e+3]=a[3]})),document.getElementById("newCanvas").getContext("2d").putImageData(this.state.newData,0,0)}}},{key:"render",value:function(){var e=this,t=this.state.sample?"container cross":"container";return i.a.createElement("div",{className:t},i.a.createElement("div",{className:"grid"},i.a.createElement("label",null,"Old Preview"),i.a.createElement("label",null,"New Preview"),i.a.createElement("div",{className:"transparent"},i.a.createElement("canvas",{id:"canvas",onClick:this.handleClick})),i.a.createElement("div",{className:"transparent"},i.a.createElement("canvas",{id:"newCanvas",onClick:this.handleClick})),i.a.createElement("input",{id:"upload",type:"file",onChange:this.imageChange,hidden:!0}),i.a.createElement("button",{onClick:function(){return document.getElementById("upload").click()}},"Upload Image"),i.a.createElement("button",{onClick:this.download},"Download"),i.a.createElement("button",{onClick:function(){return e.swapImage(!0)}},"Copy new into old"),i.a.createElement("button",{onClick:function(){return e.swapImage(!1)}},"Copy old into new")),i.a.createElement("a",{id:"download",href:"/",style:{display:"none"},download:"converted"},"Download"),i.a.createElement(C,{replace:this.replace,file:this.state.newData,click:function(){return e.setState({sample:!e.state.sample})},pixel:this.state.pixel,submit:this.replaceSection}))}}]),t}(n.Component);r.a.render(i.a.createElement(w,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.9825e3dd.chunk.js.map